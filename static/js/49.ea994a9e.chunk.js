(this.webpackJsonpuz=this.webpackJsonpuz||[]).push([[49],{1123:function(e,t,n){},1153:function(e,t,n){"use strict";n.r(t);var a=n(34),r=n.n(a),o=n(49),s=n(10),i=n(11),c=n(12),l=n(13),u=n(0),p=n.n(u),d=n(15),h=n(39),f=function(){function e(){if(Object(s.a)(this,e),(this instanceof e?this.constructor:void 0)===e)throw new TypeError("This is an abstract class and cannot be instantiated.")}return Object(i.a)(e,[{key:"fetchPics",value:function(){throw new TypeError("fetchPics cannot be used from the abstract class.  It must be overridden")}}],[{key:"convertData",value:function(e){return e.map((function(e){return e.word}))}}]),e}(),m=function(e){if(!e)return[{partsOfSpeech:"alphabet",word:"no entry"}];for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),a=[e[n],e[t]];e[t]=a[0],e[n]=a[1]}return e},v=function(e){Object(l.a)(n,e);var t=Object(c.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).data=e,a.loading=!1,a.keys=Object({NODE_ENV:"production",PUBLIC_URL:"/uz",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).PIXABAY_API_KEYS,a.keyCount=0,a.keys=Object({NODE_ENV:"production",PUBLIC_URL:"/uz",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).PIXABAY_API_KEYS.split(","),a}return Object(i.a)(n,[{key:"fetchPics",value:function(){var e=Object(o.a)(r.a.mark((function e(t){var n,a,s,i=this;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.loading=!0,n=f.convertData(t.vocabulary),m(n),e.next=5,t.vocabulary.map(function(){var e=Object(o.a)(r.a.mark((function e(n){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.keyword?n.keyword:n.translation,e.abrupt("return",new Promise((function(e){t.modifier;setTimeout(Object(o.a)(r.a.mark((function t(){var o,s,c,l;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o="https://pixabay.com/api/?key=".concat(i.keys[i.keyCount],"&q=").concat(a,"&image_type=photo&pretty=true&per_page=").concat(encodeURIComponent(100),"&safesearch=true"),t.next=3,fetch(o);case 3:return s=t.sent,t.next=6,s.json();case 6:c=t.sent,l=c.hits.map((function(e){return Object(h.a)({},n,{},e)})),i.keyCount+1!==i.keyCount.length-1?i.keyCount:i.keyCount=0,e(l);case 10:case"end":return t.stop()}}),t)}))),1e3)})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 5:return a=e.sent,e.next=8,Promise.all(a);case 8:return s=e.sent,this.loading=!1,e.abrupt("return",s);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(f),g=function e(t){Object(s.a)(this,e);var n=new v(t);this.functions=function(e){if("fetchPixabay"===e)return n.fetchPics(t)}},b=n(736),y=n.n(b),w=n(209),C=n.n(w),O=n(36),k=n.n(O),j=n(666),E=n.n(j),x=n(667),S=n.n(x),P=n(712),T=n.n(P),_=n(1124),D=n.n(_),I=n(30),U=n(33),A=n.n(U),N=(n(886),n(1116)),L=n(18),K=[{voiceCode:"de-DE",lang:"deutsch",label:"german"},{voiceCode:"en-ES",lang:"US english",label:"english us"},{voiceCode:"en-GB",lang:"UK engislish",label:"english (uk)"},{voiceCode:"es-ES",lang:"espanol",label:"spanish (mexican)"},{voiceCode:"fr-FR",lang:"francais",label:"french"},{voiceCode:"hi-IN",lang:"hindi",label:"hindi"},{voiceCode:"id-ID",lang:"indonesia",label:"indonesian"},{voiceCode:"it-IT",lang:"italiano",label:"italian"},{voiceCode:"ja-JP",lang:"japanese",label:"japanese"},{voiceCode:"ko-KR",lang:"korean",label:"korean"},{voiceCode:"nl-NL",lang:"Nederlands",label:"dutch"},{voiceCode:"pl-PL",lang:"polski",label:"polish"},{voiceCode:"pt-BR",lang:"portugues brazil",label:"portuguese (brazil)"},{voiceCode:"ru-RU",lang:"russian",label:"russian"},{voiceCode:"zh-CN",lang:"Chinese",label:"chinese"}],R=n(66),W=n.n(R),z=(n(1123),function(e){Object(l.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={translation:!1,expanded:!1,Utter:{}},e.toggleTranslate=function(){(console.log("audio: ",e.props.audioUrl),e.props.audioUrl)?new Audio(e.props.audioUrl).play():new Audio(e.props.audioUrl).play();e.setState({translation:!0}),setTimeout((function(){e.setState({translation:!1})}),1e4)},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.partsOfSpeech,a=e.word,r=e.phrase,o=e.question,s=e.webformatURL;if("alphabet"===n||"vowel"===n||"consonant"===n)var i=p.a.createElement("h1",null,a);else i=p.a.createElement(T.a,{className:t.media,image:s,title:"Paella dish"});return p.a.createElement(E.a,{className:t.randomCard},p.a.createElement(y.a,{avatar:p.a.createElement(C.a,{"aria-label":"level",className:t.avatar},d.session.level),title:a||r||o,subheader:n}),i,p.a.createElement(S.a,null,p.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifycontent:"center"}},p.a.createElement(k.a,{onClick:this.toggleTranslate},this.state.translation?this.props.translation:p.a.createElement(D.a,null)))))}}]),n}(u.PureComponent)),B=function(e){Object(l.a)(n,e);var t=Object(c.a)(n);function n(e){var a,i,c;return Object(s.a)(this,n),(a=t.call(this,e)).resetOwner=function(){setTimeout((function(){return a.setState({isOwner:!0,loading:!1})}),3e3)},a.shufflePics=function(){var e=Object(o.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:0===t&&a.setState({isOwner:!1,loading:!0},(function(){var e=d.session.carousel;m(e);var t=e.map((function(e){return m(e)}));a.setState({randomVocabulary:t}),a.resetOwner()}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.state={count:0,loading:!0,isOwner:(i=d.session.user,c=d.session.zone,i._id===c.owner._id||i.username===c.owner.username),randomVocabulary:d.session.carousel},a}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.state.isOwner&&new g({vocabulary:d.session.vocabulary,modifier:d.session.modifier}).functions("fetchPixabay").then((function(t){d.session.carousel=t,console.log("res: ",t),e.setState({randomVocabulary:t,loading:!1,isOwner:!0})}))}},{key:"render",value:function(){var e=this;return p.a.createElement(N.Carousel,{width:"600px",infiniteLoop:!0,onChange:function(t){return e.shufflePics(t)},showThumbs:!1,showIndicators:!1,showArrows:this.state.isOwner&&!this.state.loading,showStatus:!0,speak:this.props.speak,swipeable:this.state.isOwner},this.state.loading&&p.a.createElement(E.a,{className:this.props.classes.loadingCard},p.a.createElement(S.a,null,p.a.createElement(L.f,{flexdirection:"column",justifycontent:"center"},p.a.createElement(A.a,{gutterBottom:!0,variant:"h6"},"Loading Pictures"),p.a.createElement(L.r,null)))),!this.state.loading&&this.state.randomVocabulary.map((function(t,n){var a=m(t);return p.a.createElement("div",{key:n},p.a.createElement(z,Object.assign({},a[0],e.props)))})))}}]),n}(u.PureComponent),H=function(e){Object(l.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).state={voices:[]},e.componentDidMount=function(){console.log("carousel props: ",e.props),window.speechSynthesis.onvoiceschanged=Object(o.a)(r.a.mark((function t(){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,window.speechSynthesis.getVoices();case 2:n=t.sent,e.setState({voices:n},console.log("state: ",e.state));case 4:case"end":return t.stop()}}),t)})))},e.speak=function(t){console.log("hello");var n=d.session.zone.teachingLang.toLowerCase(),a=K.filter((function(e){return e.label===n}));console.log("result: ",a[0].voiceCode);var r=e.state.voices.filter((function(e){e.lang,a[0].voiceCode}));console.log("voice: ",r);var o=new SpeechSynthesisUtterance(t);o.lang=a[0].voiceCode,window.speechSynthesis.speak(o)},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props.classes;return p.a.createElement(L.f,{className:e.root},p.a.createElement(L.f,null,p.a.createElement(A.a,{className:e.appTitle,gutterBottom:!0,component:"p"},"Carousel")),p.a.createElement(L.f,null,p.a.createElement(B,Object.assign({speak:this.speak},this.props,this.state))))}}]),n}(u.PureComponent);t.default=Object(I.withStyles)((function(e){return{appTitle:{color:"white",padding:"15px 15px 0 0"},actions:{display:"flex"},avatar:{backgroundColor:W.a[500]},expand:{transform:"rotate(0deg)",marginLeft:"auto",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"},card:{display:"flex",alignItems:"center",justifyContent:"center",margin:"30px auto 30px",maxWidth:412,minHeight:370},cardActions:{display:"flex",justifyContent:"center"},cardContent:{flexGrow:1},cardMedia:{paddingTop:"46.25%","&:hover":{cursor:"pointer"}},cardTitle:{height:"100%"},loadingCard:{display:"flex",alignItems:"center",justifyContent:"center",margin:"30px",maxWidth:532,minHeight:370},media:{height:0,paddingTop:"56.25%"},randomCard:{alignItems:"center",justifyContent:"center",margin:"30px auto 30px",maxWidth:412,minHeight:370},root:{backgroundColor:"#3e3e3e",minHeight:509,minWidth:320}}}))(H)}}]);
//# sourceMappingURL=49.ea994a9e.chunk.js.map