{"version":3,"sources":["graphql/mutations/account-mutations.js","layouts/account/account-settings.js","layouts/account/styles.js"],"names":["CANCEL_PAY_MONTHLY","gql","accountFragment","withStyles","styles","props","classes","console","log","cancel","mutate","temp","session","user","filtered","roles","filter","val","isCanceled","cookies","_uid","history","push","notification","type","Fragment","className","settingsContent","heroUnit","heroContent","component","variant","align","color","gutterBottom","heroButtons","paragraph","container","spacing","justify","item","mutation","onClick","theme","appBar","position","billingHeroUnit","backgroundColor","billingHeroContent","maxWidth","margin","padding","unit","masthead","flexDirection","billingRoot","heading","content","flexGrow","drawer","width","flexShrink","drawerPaper","palette","background","paper","marginBottom","marginTop","icon","marginRight","layout","marginLeft","breakpoints","up","list","height","overflow","subHeading","root","display"],"mappings":"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","file":"static/js/account-settings.81cbd36a.chunk.js","sourcesContent":["import gql from \"graphql-tag\"\nimport {accountFragment} from \"../fragments/user-fragments.js\"\n\nexport const CANCEL_PAY_MONTHLY = gql`\n  mutation cancelPayMonthly {\n    cancelPayMonthly {\n      ...UserInfo\n    }\n  }\n\n  ${accountFragment}\n`\n\nexport const CREATE_PAY_MONTHLY = gql`\n  mutation createPayMonthly($source: String!, $ccLast4: String) {\n    createPayMonthly(source: $source, ccLast4: $ccLast4) {\n      ...UserInfo\n    }\n  }\n\n  ${accountFragment}\n`\n\nexport const CHANGE_CREDIT_CARD = gql`\n  mutation changeCreditCard($source: String!, $ccLast4: String) {\n    changeCreditCard(source: $source, ccLast4: $ccLast4) {\n      ...UserInfo\n    }\n  }\n\n  ${accountFragment}\n`\n","import React from \"react\"\nimport {Mutation} from \"react-apollo\"\n\nimport Button from \"@material-ui/core/Button\"\nimport Grid from \"@material-ui/core/Grid\"\nimport {cookies, session} from \"brownies\"\nimport Typography from \"@material-ui/core/Typography\"\nimport {withStyles} from \"@material-ui/core/styles\"\n\nimport {styles} from \"./styles.js\"\nimport {CANCEL_PAY_MONTHLY} from \"../../graphql/mutations/account-mutations.js\"\n\nfunction AccountSettings(props) {\n  const {classes} = props\n\n  console.log(\"props: \", props)\n  const cancel = mutate => () => {\n    mutate()\n    var temp = session.user\n    const filtered = session.user.roles.filter(val => {\n      return val !== \"payMonthly\"\n    })\n    temp.isCanceled = true\n    temp.roles = filtered\n    session.user = temp\n\n    delete cookies._uid\n    delete session.user\n    props.history.push(\"/login\", {\n      notification: \"Your account has been deactivated\",\n      type: \"success\"\n    })\n  }\n\n  return (\n    <React.Fragment>\n      <main className={classes.settingsContent}>\n        {/* Hero unit */}\n        <div className={classes.heroUnit}>\n          <div className={classes.heroContent}>\n            <Typography\n              component=\"h1\"\n              variant=\"h2\"\n              align=\"center\"\n              color=\"textPrimary\"\n              gutterBottom>\n              Account Settings\n            </Typography>\n            <div className={classes.heroButtons} />\n          </div>\n        </div>\n        {session.user.isCanceled === false && (\n          <div>\n            <Typography\n              variant=\"h6\"\n              align=\"center\"\n              color=\"textSecondary\"\n              paragraph>\n              Your account will be deactivated. You\n              will not be able to login with your current credentials.\n            </Typography>\n            <Grid container spacing={16} justify=\"center\">\n              <Grid item>\n                <Mutation mutation={CANCEL_PAY_MONTHLY}>\n                  {mutate => {\n                    return (\n                      <Button\n                        variant=\"contained\"\n                        color=\"secondary\"\n                        onClick={cancel(mutate)}>\n                        Cancel My Account\n                      </Button>\n                    )\n                  }}\n                </Mutation>\n              </Grid>\n            </Grid>\n          </div>\n        )}\n      </main>\n    </React.Fragment>\n  )\n}\n\nexport default withStyles(styles)(AccountSettings)\n","const drawerWidth = 240\n\nexport const styles = theme => ({\n  appBar: {\n    position: \"relative\"\n  },\n  billingHeroUnit: {\n    backgroundColor: \"#2bae3a\"\n  },\n  billingHeroContent: {\n    maxWidth: 960,\n    margin: \"0 auto\",\n    padding: `${theme.spacing.unit * 8}px ${theme.spacing.unit * 6}px ${theme\n      .spacing.unit * 6}px`\n  },\n  masthead: {\n    padding: theme.spacing.unit * 1,\n    margin: \"auto\",\n    maxWidth: 900,\n    [`@media (max-width:770px)`]: {\n      flexDirection: \"column\"\n    }\n  },\n  billingRoot: {\n    maxWidth: 960,\n    margin: \"0 auto\"\n  },\n  heading: {\n    color: \"black\"\n  },\n  content: {\n    flexGrow: 1,\n    padding: theme.spacing.unit * 3\n  },\n  drawer: {\n    width: drawerWidth,\n    flexShrink: 0\n  },\n  drawerPaper: {\n    width: drawerWidth\n  },\n  heroUnit: {\n    backgroundColor: theme.palette.background.paper,\n    marginBottom: \"30px\"\n  },\n  heroContent: {\n    maxWidth: 600,\n    margin: \"0 auto\",\n    padding: `${theme.spacing.unit * 8}px 0 ${theme.spacing.unit * 6}px`\n  },\n  heroButtons: {\n    marginTop: theme.spacing.unit * 4\n  },\n  icon: {\n    marginRight: theme.spacing.unit * 2\n  },\n  layout: {\n    width: \"auto\",\n    marginLeft: theme.spacing.unit * 3,\n    marginRight: theme.spacing.unit * 3,\n    [theme.breakpoints.up(1100 + theme.spacing.unit * 3 * 2)]: {\n      width: 1100,\n      marginLeft: \"auto\",\n      marginRight: \"auto\"\n    }\n  },\n  list: {\n    margin: \"0 auto\"\n  },\n  settingsContent: {\n    flexGrow: 1,\n    padding: theme.spacing.unit * 3,\n    height: \"100vh\",\n    overflow: \"auto\",\n    width: \"100%\"\n  },\n  subHeading: {\n    color: \"black\",\n    marginTop: \"40px\",\n    position: \"relative\"\n  },\n  root: {\n    display: \"flex\"\n  }\n})\n"],"sourceRoot":""}