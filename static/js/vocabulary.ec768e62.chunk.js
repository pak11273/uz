/*! For license information please see vocabulary.ec768e62.chunk.js.LICENSE.txt */
(this.webpackJsonpuz=this.webpackJsonpuz||[]).push([[33],{1111:function(e,t,n){"use strict";var a=n(3);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(0)),i=(0,a(n(37)).default)(r.default.createElement(r.default.Fragment,null,r.default.createElement("path",{fill:"none",d:"M24 24H0V0h24v24z"}),r.default.createElement("circle",{cx:"9",cy:"12",r:"8"}),r.default.createElement("path",{d:"M17 4.26v2.09c2.33.82 4 3.04 4 5.65s-1.67 4.83-4 5.65v2.09c3.45-.89 6-4.01 6-7.74s-2.55-6.85-6-7.74z"})),"FiberSmartRecord");t.default=i},1112:function(e,t,n){"use strict";var a=n(3);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(0)),i=(0,a(n(37)).default)(r.default.createElement(r.default.Fragment,null,r.default.createElement("path",{d:"M10 18h4v-2h-4v2zM3 6v2h18V6H3zm3 7h12v-2H6v2z"}),r.default.createElement("path",{fill:"none",d:"M0 0h24v24H0z"})),"FilterList");t.default=i},1113:function(e,t,n){"use strict";var a=n(3);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(0)),i=(0,a(n(37)).default)(r.default.createElement(r.default.Fragment,null,r.default.createElement("path",{d:"M8 5v14l11-7z"}),r.default.createElement("path",{fill:"none",d:"M0 0h24v24H0z"})),"PlayArrow");t.default=i},1114:function(e,t,n){"use strict";var a=n(3);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(0)),i=(0,a(n(37)).default)(r.default.createElement(r.default.Fragment,null,r.default.createElement("path",{d:"M12 14c1.66 0 2.99-1.34 2.99-3L15 5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 14 6.7 11H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c3.28-.48 6-3.3 6-6.72h-1.7z"}),r.default.createElement("path",{fill:"none",d:"M0 0h24v24H0z"})),"Mic");t.default=i},1152:function(e,t,n){"use strict";n.r(t);var a=n(212),r=n(34),i=n.n(r),o=n(49),d=n(10),s=n(11),c=n(12),u=n(13),l=n(83),f=n(0),p=n.n(f),h=n(44),m=n(15),g=n(88),v=n(718),b=n.n(v),y=n(222),w=n(719),S=n.n(w),R=n(720),x=n.n(R),C=n(721),k=n.n(C),M=n(674),T=n.n(M),E=n(673),O=n.n(E),L=n(735),D=n(713),A=n.n(D),U=n(722),j=n.n(U),_=n(103),B=n(1112),I=n.n(B),P=n(723),z=n.n(P),F=n(59),$=n.n(F),N=n(45),W=n.n(N),V=n(724),H=n.n(V),q=n(1114),G=n.n(q),K=n(1113),Y=n.n(K),J=n(102),X=n.n(J),Q=n(725),Z=n.n(Q),ee=n(33),te=n.n(ee),ne=n(30),ae=n(774),re=n(656),ie="This field must be at least 10 characters",oe="This field cannot exceed 100 characters",de=(re.string().max(255),re.object().shape({word:re.string().min(1,ie).max(100,oe).required("A word is required"),translation:re.string().min(1,ie).max(100,oe).required("A translation is required"),audio:re.string().url().min(1,ie).max(100,oe)})),se=(re.object().shape({title:re.string().required("A course title is required").min(10,ie).max(100,oe),courseDescription:re.string().min(100,"Course description must be at least 100 characters").max(350,"Course description cannot exceed 350 characters").required("A course description is required")}),n(17)),ce=n(19),ue=n.n(ce),le=n(4),fe=n(23),pe=n.n(fe);function he(){var e=Object(le.a)(["\n  query getVocabularies($level: ID!) {\n    getVocabularies(level: $level) {\n      vocabulary {\n        _id\n        audioUrl\n        gender\n        level\n        keyword\n        partsOfSpeech\n        translation\n        word\n      }\n    }\n  }\n"]);return he=function(){return e},e}var me=pe()(he());function ge(){var e=Object(le.a)(["\n  mutation vocabularyAudioDelete($_id: ID, $public_id: String) {\n    vocabularyAudioDelete(_id: $_id, public_id: $public_id) {\n      vocabulary {\n        _id\n        level\n      }\n      errors {\n        path\n        message\n      }\n    }\n  }\n"]);return ge=function(){return e},e}function ve(){var e=Object(le.a)(["\n  mutation vocabularyAudioSave($_id: ID, $audioUrl: String, $tags: [String]) {\n    vocabularyAudioSave(_id: $_id, audioUrl: $audioUrl, tags: $tags) {\n      vocabulary {\n        _id\n        level\n      }\n      errors {\n        path\n        message\n      }\n    }\n  }\n"]);return ve=function(){return e},e}function be(){var e=Object(le.a)(["\n  mutation vocabularyDelete($_id: ID, $public_id: String) {\n    vocabularyDelete(_id: $_id, public_id: $public_id) {\n      vocabulary {\n        _id\n      }\n      errors {\n        path\n        message\n      }\n    }\n  }\n"]);return be=function(){return e},e}function ye(){var e=Object(le.a)(["\n  mutation vocabularyUpdate(\n    $_id: ID\n    $audioUrl: String\n    $gender: String\n    $keyword: String\n    $translation: String\n    $partsOfSpeech: String\n    $word: String\n  ) {\n    vocabularyUpdate(\n      input: {\n        _id: $_id\n        audioUrl: $audioUrl\n        gender: $gender\n        keyword: $keyword\n        partsOfSpeech: $partsOfSpeech\n        translation: $translation\n        word: $word\n      }\n    ) {\n      vocabulary {\n        _id\n        audioUrl\n        gender\n        keyword\n        partsOfSpeech\n        translation\n        word\n      }\n      errors {\n        message\n      }\n    }\n  }\n"]);return ye=function(){return e},e}function we(){var e=Object(le.a)(["\n  mutation vocabularyCreate(\n    $audioUrl: String\n    $gender: String\n    $level: ID!\n    $keyword: String\n    $partsOfSpeech: String\n    $translation: String\n    $word: String\n  ) {\n    vocabularyCreate(\n      input: {\n        audioUrl: $audioUrl\n        gender: $gender\n        level: $level\n        keyword: $keyword\n        partsOfSpeech: $partsOfSpeech\n        translation: $translation\n        word: $word\n      }\n    ) {\n      vocabulary {\n        _id\n        audioUrl\n        gender\n        keyword\n        partsOfSpeech\n        translation\n        word\n      }\n      errors {\n        message\n      }\n    }\n  }\n"]);return we=function(){return e},e}var Se=pe()(we()),Re=pe()(ye()),xe=pe()(be()),Ce=(pe()(ve()),pe()(ge())),ke=n(214),Me=n(748),Te=n(39),Ee=n(36),Oe=n.n(Ee),Le=n(69),De=n.n(Le),Ae=n(71),Ue=n.n(Ae),je=n(70),_e=n.n(je),Be=n(77),Ie=n.n(Be),Pe=n(76),ze=n.n(Pe),Fe=n(1111),$e=n.n(Fe),Ne=n(18),We=n(894),Ve=n(810),He=n(150),qe=n.n(He),Ge=n(826),Ke=n.n(Ge);function Ye(){var e=Object(le.a)(["\n  mutation vocabularyAudioDelete($_id: ID, $public_id: String) {\n    vocabularyAudioDelete(_id: $_id, public_id: $public_id) {\n      vocabulary {\n        _id\n        level\n      }\n      errors {\n        path\n        message\n      }\n    }\n  }\n"]);return Ye=function(){return e},e}function Je(){var e=Object(le.a)(["\n  mutation vocabularyAudioSave($_id: ID, $audioUrl: String, $tags: [String]) {\n    vocabularyAudioSave(_id: $_id, audioUrl: $audioUrl, tags: $tags) {\n      vocabulary {\n        _id\n        level\n      }\n      errors {\n        path\n        message\n      }\n    }\n  }\n"]);return Je=function(){return e},e}function Xe(){var e=Object(le.a)(["\n  mutation vocabularyDelete($_id: ID, $public_id: String) {\n    vocabularyDelete(_id: $_id, public_id: $public_id) {\n      vocabulary {\n        _id\n      }\n      errors {\n        path\n        message\n      }\n    }\n  }\n"]);return Xe=function(){return e},e}function Qe(){var e=Object(le.a)(["\n  mutation vocabularyUpdate(\n    $_id: ID\n    $audioUrl: String\n    $gender: String\n    $translation: String\n    $partsOfSpeech: String\n    $word: String\n  ) {\n    vocabularyUpdate(\n      input: {\n        _id: $_id\n        audioUrl: $audioUrl\n        gender: $gender\n        partsOfSpeech: $partsOfSpeech\n        translation: $translation\n        word: $word\n      }\n    ) {\n      vocabulary {\n        _id\n        audioUrl\n        gender\n        partsOfSpeech\n        translation\n        word\n      }\n      errors {\n        message\n      }\n    }\n  }\n"]);return Qe=function(){return e},e}function Ze(){var e=Object(le.a)(["\n  mutation vocabularyCreate(\n    $audioUrl: String\n    $gender: String\n    $level: ID!\n    $partsOfSpeech: String\n    $translation: String\n    $word: String\n  ) {\n    vocabularyCreate(\n      input: {\n        audioUrl: $audioUrl\n        gender: $gender\n        level: $level\n        partsOfSpeech: $partsOfSpeech\n        translation: $translation\n        word: $word\n      }\n    ) {\n      vocabulary {\n        _id\n        audioUrl\n        gender\n        partsOfSpeech\n        translation\n        word\n      }\n      errors {\n        message\n      }\n    }\n  }\n"]);return Ze=function(){return e},e}function et(){var e=Object(le.a)(["\n  query getVocabularies($level: ID!) {\n    getVocabularies(level: $level) {\n      vocabulary {\n        _id\n        audioUrl\n        gender\n        level\n        partsOfSpeech\n        translation\n        word\n      }\n    }\n  }\n"]);return et=function(){return e},e}pe()(et()),pe()(Ze()),pe()(Qe()),pe()(Xe());var tt=pe()(Je()),nt=(pe()(Ye()),{audioBlob:null,blob:null,audioFileName:"Click in the box or drag n&apos; drop an audio file.",public_id:"",record:!1,recording:!1,recordedBlobSize:0,readableBlobSize:"",isSaving:!1,secure_url:"",signature:"",url:"",vocabId:null}),at=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(){var e;return Object(d.a)(this,n),(e=t.call(this)).blob=null,e.recorder=null,e.componentDidMount=Object(o.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:window.stream&&(e.recorder=new Ke.a(window.stream,{disableLogs:!0,type:"audio"}));case 1:case"end":return t.stop()}}),t)}))),e.stopRecording=Object(o.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.recorder.stopRecording((function(t){var n=e.recorder.getBlob();e.setState({recording:!1,recordedBlobSize:n.size,readableBlobSize:Object(Ve.a)(n.size)}),e.recorder.getDataURL((function(t){e.setState({audioFileName:"recorded.webm",audioBlob:t})}));var a=e.myRef.current,r=document.createElement("audio"),i=document.createElement("Article"),o=document.createElement("button"),d=document.createElement("span");r.src=t,d.innerHTML=e.state.readableBlobSize,i.classList.add("clip"),i.setAttribute("style","display: flex; justify-content: center; padding-top: 20px; width: 390px"),r.setAttribute("controls",""),o.innerHTML="DEL",i.appendChild(r),i.appendChild(o),o.classList.add("deleteButton"),o.setAttribute("style","font-size: 10px; border-radius: 50%; width: 30px; height: 30px; padding: 3px; background: red; outline: none; border-color: transparent; margin: 12px; cursor: pointer;"),i.appendChild(d),d.setAttribute("style","display: inline-block,font-size: 18px; width: 200px; height: 30px; padding: 3px; margin: 12px; "),a.appendChild(i),o.onclick=function(t){e.resetState(),e.enableStop();var n=t.target;n.parentNode.parentNode.removeChild(n.parentNode)}}));case 3:e.setState({record:!0}),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.log("The following gUM error occured: "+t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])}))),e.startRecording=Object(o.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.recorder.startRecording(),e.setState({recording:!0,vocabId:e.props.rowData._id});case 2:case"end":return t.stop()}}),t)}))),e.enableStop=function(){e.setState({record:!1})},e.saveAudioModal=function(t){return Object(o.a)(i.a.mark((function n(){var a;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:(a=document.querySelector(".deleteButton"))&&(a.style.visibility="hidden"),e.state.audioBlob&&(e.setState({isSaving:!0}),new Promise(function(){var t=Object(o.a)(i.a.mark((function t(n){var a,r,o;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.state.audioBlob,"video","vocabulary-audio",r=[m.session.user.username],t.next=6,Object(ae.b)(a,"video","vocabulary-audio",r);case 6:o=t.sent,n(o);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).then((function(n){e.setState({isSaving:!1,audioBlob:null}),t(),e.props.client.mutate({mutation:tt,variables:{audioUrl:n.secure_url,_id:e.state.vocabId,tags:n.tags}}).then((function(t){console.log("res: ",t),e.props.causeRender(t.data.vocabularyAudioSave.vocabulary.level)}))})).catch((function(e){return console.log("err: ",e)})));case 3:case"end":return n.stop()}}),n)})))},e.resetState=function(){e.setState(Object(Te.a)({},nt))},e.resetOpenModal=function(){e.recorder.stopRecording(),e.props.resetOpenModal(),e.resetState()},e.onAudioDrop=function(t){return function(n,a){e.resetState(),e.setState({vocabId:t._id}),qe()(a)||alert("Please check the file format and/or decrease the file size to less than 500kb."),qe()(n)||(e.setState({audioBlob:n[0],audioFileName:n[0].name}),e.saveAudioModal(e.props.closeModal))}},e.myRef=p.a.createRef(),e.state=nt,e}return Object(s.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.classes,a=t.openModal,r=t.closeModal,i=t.rowData;return p.a.createElement("div",null,p.a.createElement(te.a,null,p.a.createElement(De.a,{open:a,onBackdropClick:this.resetOpenModal,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},p.a.createElement(ze.a,{id:"alert-dialog-title"},"Record your audio"),p.a.createElement(_e.a,null,p.a.createElement(Ie.a,{id:"alert-dialog-description"},"You can either record your own or upload an audio file. Audio files should be in .wav, webm, or mp3 format and under 500 KB. Click Save when done. Clicking outside the window will reset everything."),p.a.createElement("div",null,p.a.createElement(We.a,{accept:"audio/*",maxSize:5e5,multiple:!1,onDrop:this.onAudioDrop(i)},(function(t){var a=t.getRootProps,r=t.getInputProps;return p.a.createElement("section",null,p.a.createElement("div",Object.assign({className:n.dropzone},a()),p.a.createElement("input",r()),p.a.createElement("p",{style:{cursor:"pointer",textAlign:"center"}},e.state.audioFileName)))}))),p.a.createElement("div",{ref:this.myRef,style:{display:"flex",justifyContent:"center",alignItems:"center"}})),p.a.createElement(Ue.a,{style:{alignItems:"center",display:"flex",justifyContent:"center",marginBottom:"30px"}},p.a.createElement(Oe.a,{id:i&&i._id,className:this.state.recording&&n.recording,onClick:this.startRecording,disabled:!!this.state.audioBlob,variant:"contained",color:"secondary"},p.a.createElement($e.a,null),p.a.createElement("span",{style:{paddingLeft:"10px"}},"REC")),p.a.createElement(Oe.a,{onClick:this.stopRecording,disabled:!this.state.recording,style:{color:"black",marginLeft:"8px"}},"stop"),p.a.createElement(Ne.s,{spinner:"#2979FF",loading:this.state.isSaving,disabled:!this.state.audioBlob,onClick:this.saveAudioModal(r),style:{position:"absolute",right:"20px"},color:"secondary"},"Save")))))}}]),n}(f.Component),rt=Object(ne.withStyles)((function(e){return{record:{backgroundColor:e.palette.error},recording:{background:"green",color:"black"},dropzone:{alignItems:"center",borderWidth:"2px",borderColor:"rgb(102, 102, 102)",borderStyle:"dashed",borderRadius:"5px",display:"flex",height:"100px",justifyContent:"center",margin:"20px auto 0",padding:"3px",position:"relative",width:"200px"}}}))(Object(h.withApollo)(at)),it=(f.Component,n(47)),ot={container:function(e){return Object(Te.a)({},e,{zIndex:11})},option:function(e,t){return Object(Te.a)({},e,{borderBottom:"1px dotted black",color:t.isSelected?"red":"#2979FF",padding:20,textAlign:"left"})},control:function(e){return Object(Te.a)({},e,{margin:"20px auto",padding:"3px",position:"relative",width:"200px",height:"50px",borderWidth:"1px",borderColor:"rgba(0, 0, 0, 0.87)",borderRadius:"5px"})}};m.session.levels&&Object(m.subscribe)(m.session,"levels",(function(e){window.app.reformedLevels=e.map((function(e,t){return{value:e.title,label:"".concat(++t,". ").concat(e.title)}}))}));var dt=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(d.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={level:"",levels:[{}],clearable:!0,values:"",rtl:"",selectedValue:null,selectedOption:null},e.componentDidMount=function(){m.session.levels||window.location.replace("/login");var t=m.session.levels.map((function(e,t){return{value:e.title,label:"".concat(++t,". ").concat(e.title)}}));window.app.reformedLevels=t,e.setState({level:m.session.level,levels:window.app.reformedLevels})},e.handleChange=function(t){e.setState({selectedOption:t});var n=m.session.levels.findIndex((function(e){return e.title===t.value}));m.session.level=n+1,e.props.causeRender(m.session.levelsIdsArr[n])},e}return Object(s.a)(n,[{key:"render",value:function(){var e=this.state,t=e.clearable,n=e.levels,a=this.state.selectedOption;return p.a.createElement(p.a.Fragment,null,p.a.createElement(Ne.f,{flexdirection:"row"},p.a.createElement(te.a,{style:{paddingRight:"10px"},variant:"h6",align:"center"},"Choose a Level:"),p.a.createElement(it.a,{styles:ot,id:"app-select",simpleValue:!0,clearable:t,name:"level",options:n,onChange:this.handleChange,value:a,searchable:!0}),p.a.createElement(te.a,{style:{padding:"0 10px"},variant:"h6",align:"center"},m.session.level?m.session.level+". "+m.session.levels[m.session.level?m.session.level-1:0].title:null)))}}]),n}(f.PureComponent),st=ue()({loader:function(){return n.e(3).then(n.t.bind(null,775,7))},loading:se.a,delay:200}),ct=ue()({loader:function(){return Promise.all([n.e(1),n.e(2),n.e(3)]).then(n.t.bind(null,775,7)).then((function(e){return e.MTableEditRow}))},loading:se.a,delay:200}),ut=ue()({loader:function(){return n.e(3).then(n.t.bind(null,775,7)).then((function(e){return e.MTableToolbar}))},loading:se.a,delay:200}),lt=function(e){return"audio"===e.columnDef.title?null:p.a.createElement(Ne.h,Object.assign({value:""},e))},ft=function(e){return p.a.createElement("div",{style:{display:"table",width:"100%",height:"100%",backgroundColor:Object(_.fade)(e.theme.palette.background.paper,.7)}},p.a.createElement("div",{style:{display:"table-cell",width:"100%",height:"100%",verticalAlign:"middle",textAlign:"center"}},p.a.createElement(L.CircularProgress,null)))},pt=function(e){var t=e.onEditingApproved,n=Object(l.a)(e,["onEditingApproved"]);return p.a.createElement(g.b,{validationSchema:de,initialValues:n.data,onSubmit:function(e){"update"===n.mode&&e!==n.data&&delete e.tableData,t(n.mode,e,n.data)},render:function(e){var t=e.submitForm;return p.a.createElement(ct,Object.assign({},n,{onEditingApproved:t}))}})},ht=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(d.a)(this,n),(r=t.call(this,e))._isMounted=!0,r.componentDidMount=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m.session.level="",r.props.client.query({query:ke.a,fetchPolicy:"no-cache",variables:{_id:m.session.course&&m.session.course._id}}).then((function(e){m.session.levels=e.data.getCourse.levels})).catch((function(e){return console.log("err: ",e)})),m.session.user.username===m.session.course.owner.username?r.can={onRowAdd:function(){var e=Object(o.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new Promise((function(e){var n=r.state.vocabulary;n.push(t),r._isMounted&&r.setState({vocabulary:n}),e({newData:t,vocabulary:n})})),r._addTrash=b()(n),r._addTrash.then((function(e){var t=e.newData,n=r.props.client.mutate({mutation:Se,variables:{audioUrl:t.audioUrl||null,gender:t.gender||"none",level:m.session.levelsIdsArr[m.session.level-1],keyword:t.keyword||"",partsOfSpeech:t.partsOfSpeech||"none",word:t.word,translation:t.translation}});r._newVocabularyTrash=b()(n),r._newVocabularyTrash.then((function(e){if(r._newVocabularyTrash&&r._isMounted){var t=m.session.vocabulary;return t.push(e.data.vocabularyCreate.vocabulary),m.session.vocabulary=t,r._isMounted&&r.setState({vocabulary:m.session.vocabulary}),t}}))})),e.abrupt("return",r._addTrash);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onRowUpdate:function(e,t){var n=new Promise((function(n){var a=r.state.vocabulary,i=a.indexOf(t);a[i]=e,setTimeout((function(){r.setState({vocabulary:a},(function(){m.session.vocabulary=a,n()}))}),1e3),r.props.client.mutate({mutation:Re,variables:{_id:e._id,audioUrl:e.audioUrl,gender:e.gender,keyword:e.keyword,word:e.word,partsOfSpeech:e.partsOfSpeech||"none",translation:e.translation}})}));return r._updateTrash=b()(n),n},onRowDelete:function(){var e=Object(o.a)(i.a.mark((function e(t){var n,o,d,s,c,u,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(a.a)(m.session.vocabulary),e.next=3,new Promise((function(e){setTimeout((function(){for(var a=-1,r=0;r<m.session.vocabulary.length;r++)if(m.session.vocabulary[r].word===t.word){a=r;break}var i=n.splice(a,1);e({splicedVocabulary:n,spliced:i[0],deletedIndex:a})}),1e3)}));case 3:return o=e.sent,d=o.splicedVocabulary,s=o.spliced,c=o.deletedIndex,r.setState({vocabulary:d},(function(){m.session.vocabulary=d})),u=t.audioUrl?Object(ae.a)(t.audioUrl):null,e.next=9,r.props.client.mutate({mutation:xe,variables:{_id:s._id,public_id:u}});case 9:return l=e.sent,m.session.vocabulary.splice(c,1),r.setState({vocabulary:m.session.vocabulary}),e.abrupt("return",l);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}:r.can={};case 3:case"end":return e.stop()}}),e)}))),r.componentWillUnmount=function(){r._isMounted=!1,r._addTrash&&r._addTrash.trash(),r._newVocabularyTrash&&r._newVocabularyTrash.trash(),r._updateTrash&&r._updateTrash.trash()},r.closeModal=function(){r.setState({openModal:!1})},r.causeRender=function(e){r.setState({level:e,isLoading:!0},(function(){r.props.client.query({fetchPolicy:"no-cache",query:me,variables:{level:e}}).then((function(e){m.session.vocabulary=e.data.getVocabularies.vocabulary,r.setState({isLoading:!1,vocabulary:e.data.getVocabularies.vocabulary||[]})})).catch((function(e){return console.log("err: ",e)}))}))},r.modalConfig=function(e){r.setState({openModal:!0,rowData:e})},r.deleteAudio=function(){var e=Object(o.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Object(ae.a)(t.audioUrl),r.setState({isLoading:!0}),r.props.client.mutate({mutation:Ce,variables:{_id:t._id,public_id:n}}).then((function(e){r.setState({isLoading:!1}),r.causeRender(e.data.vocabularyAudioDelete.vocabulary.level)})).catch((function(e){return console.log("err: ",e)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.playAudio=function(e){new Audio(e.audioUrl).play()},r.resetOpenModal=function(){r.setState({openModal:!1})},r.state={isLoading:!1,level:m.session.level,openModal:!1,rowData:null,vocabulary:[]},r.can=null,r}return Object(s.a)(n,[{key:"render",value:function(){var e=this,t=this.props.classes;return p.a.createElement("div",{className:t.root},p.a.createElement($.a,{className:t.hero,container:!0,justify:"center",direction:"column"},p.a.createElement(X.a,{className:t.header,elevation:1},p.a.createElement(te.a,{className:t.headerBody,variant:"h4",align:"center",gutterBottom:!0},"Course Vocabulary"))),p.a.createElement("main",{className:t.content},p.a.createElement($.a,{container:!0,spacing:24},p.a.createElement($.a,{item:!0,xs:12,style:{display:"flex",flexDirection:"column",alignItems:"center"}}),p.a.createElement($.a,{item:!0,xs:12,align:"center"},p.a.createElement("div",{style:{maxWidth:"100%"}},p.a.createElement(st,{isLoading:this.state.isLoading,components:{Toolbar:function(t){return p.a.createElement(Ne.f,{flexdirection:"row",padding:"30px"},p.a.createElement(dt,{causeRender:e.causeRender}),p.a.createElement(ut,t))},EditRow:pt,EditField:lt,OverlayLoading:ft},icons:{Add:function(){return p.a.createElement(S.a,null)},Check:function(){return p.a.createElement(x.a,null)},Clear:function(){return p.a.createElement(k.a,null)},Delete:function(){return p.a.createElement(A.a,null)},Edit:function(){return p.a.createElement(j.a,null)},Filter:function(){return p.a.createElement(I.a,null)},FirstPage:function(){return p.a.createElement(z.a,null)},LastPage:function(){return p.a.createElement(H.a,null)},NextPage:function(){return p.a.createElement(O.a,null)},PreviousPage:function(){return p.a.createElement(T.a,null)},ResetSearch:function(){return p.a.createElement(k.a,null)},Search:function(){return p.a.createElement(Z.a,null)}},columns:[{title:"level",readonly:!0,render:function(){return m.session.level}},{title:"word",field:"word"},{title:"translation",field:"translation"},{title:"keyword",field:"keyword"},{title:"parts of speech",field:"partsOfSpeech",lookup:{none:"",noun:"noun",pronoun:"pronoun",verb:"verb",adjective:"adjective",adverb:"adverb",preposition:"preposition",conjunction:"conjunction",interjection:"interjection",determiner:"determiner",alphabet:"alphabet",vowel:"vowel",consonant:"consonant",other:"other"}},{title:"audio",editComponent:function(){return p.a.createElement("div",null)},field:"audioUrl",filtering:!1,render:function(t){return t&&t.audioUrl?p.a.createElement(Ne.f,{flexdirection:"row"},p.a.createElement(W.a,{onClick:function(){return e.playAudio(t)}},p.a.createElement(Y.a,null)),p.a.createElement(y.a,{roles:m.session.user.roles,perform:"course:update-vocabulary",id:m.session.user.username,matchingID:m.session.course.owner.username,yes:function(){return p.a.createElement(W.a,{onClick:function(){return e.deleteAudio(t)}},p.a.createElement(A.a,null))},no:function(){return null}})):p.a.createElement(y.a,{roles:m.session.user.roles,perform:"course:update-vocabulary",id:m.session.user.username,matchingID:m.session.course.owner.username,yes:function(){return p.a.createElement("div",null,p.a.createElement(W.a,{type:"button",onClick:function(){return e.modalConfig(t)}},p.a.createElement(G.a,null)),p.a.createElement(rt,{causeRender:e.causeRender,selectedLevel:e.state.level,closeModal:e.closeModal,openModal:e.state.openModal,resetOpenModal:e.resetOpenModal,rowData:e.state.rowData}))},no:function(){return null}})}},{title:"gender",field:"gender",lookup:{none:"",male:"male",female:"female",neuter:"neuter"}}],data:this.state.vocabulary,options:{actionsColumnIndex:-1,filtering:!0,pageSize:10,showTitle:!1,sorting:!0,rowStyle:function(e){if(e.vocabulary%2)return{backgroundColor:"#f2f2f2"}}},editable:this.can}))))))}}]),n}(f.Component);t.default=Object(h.withApollo)(Object(ne.withStyles)(Me.a)(ht))},673:function(e,t,n){"use strict";var a=n(3);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(0)),i=(0,a(n(37)).default)(r.default.createElement(r.default.Fragment,null,r.default.createElement("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),r.default.createElement("path",{fill:"none",d:"M0 0h24v24H0z"})),"ChevronRight");t.default=i},674:function(e,t,n){"use strict";var a=n(3);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(0)),i=(0,a(n(37)).default)(r.default.createElement(r.default.Fragment,null,r.default.createElement("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),r.default.createElement("path",{fill:"none",d:"M0 0h24v24H0z"})),"ChevronLeft");t.default=i},713:function(e,t,n){"use strict";var a=n(3);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(0)),i=(0,a(n(37)).default)(r.default.createElement(r.default.Fragment,null,r.default.createElement("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),r.default.createElement("path",{fill:"none",d:"M0 0h24v24H0z"})),"Delete");t.default=i},718:function(e,t,n){"use strict";e.exports=function(e){var t=function(){},n=new Promise((function(n,a){t=function(){n=null,a=null},e.then((function(e){n&&n(e)}),(function(e){a&&a(e)}))}));return n.trash=t,n}},719:function(e,t,n){"use strict";var a=n(3);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(0)),i=(0,a(n(37)).default)(r.default.createElement(r.default.Fragment,null,r.default.createElement("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),r.default.createElement("path",{fill:"none",d:"M0 0h24v24H0z"})),"Add");t.default=i},720:function(e,t,n){"use strict";var a=n(3);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(0)),i=(0,a(n(37)).default)(r.default.createElement(r.default.Fragment,null,r.default.createElement("path",{fill:"none",d:"M0 0h24v24H0z"}),r.default.createElement("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})),"Check");t.default=i},721:function(e,t,n){"use strict";var a=n(3);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(0)),i=(0,a(n(37)).default)(r.default.createElement(r.default.Fragment,null,r.default.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),r.default.createElement("path",{fill:"none",d:"M0 0h24v24H0z"})),"Clear");t.default=i},722:function(e,t,n){"use strict";var a=n(3);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(0)),i=(0,a(n(37)).default)(r.default.createElement(r.default.Fragment,null,r.default.createElement("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),r.default.createElement("path",{fill:"none",d:"M0 0h24v24H0z"})),"Edit");t.default=i},723:function(e,t,n){"use strict";var a=n(3);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(0)),i=(0,a(n(37)).default)(r.default.createElement(r.default.Fragment,null,r.default.createElement("path",{d:"M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"}),r.default.createElement("path",{fill:"none",d:"M24 24H0V0h24v24z"})),"FirstPage");t.default=i},724:function(e,t,n){"use strict";var a=n(3);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(0)),i=(0,a(n(37)).default)(r.default.createElement(r.default.Fragment,null,r.default.createElement("path",{d:"M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"}),r.default.createElement("path",{fill:"none",d:"M0 0h24v24H0V0z"})),"LastPage");t.default=i},725:function(e,t,n){"use strict";var a=n(3);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(0)),i=(0,a(n(37)).default)(r.default.createElement(r.default.Fragment,null,r.default.createElement("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),r.default.createElement("path",{fill:"none",d:"M0 0h24v24H0z"})),"Search");t.default=i},748:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(41),r=n(749),i=n.n(r),o=n(750),d=n.n(o),s=function(e){var t,n;return{actions:{display:"flex",justifyContent:"center",height:"100%",width:"100%"},addButton:{alignItems:"center",display:"flex",height:"100%",justifyContent:"center"},another:Object(a.a)({color:"white"},e.breakpoints.down("xs"),{fontSize:"40px"}),content:{alignItems:"center",display:"flex",flexGrow:1,justifyContent:"center",padding:3*e.spacing.unit},drawer:{width:240,flexShrink:0},drawerPaper:{width:240},editHeader:{alignItems:"center",display:"flex",fontSize:2*e.spacing.unit,fontWeight:400,height:"100%",justifyContent:"center",minHeight:"40px",width:"100%"},errorClass:{boxShadow:"0px 0px 2px 1px ".concat(e.palette.error.main),backgroundColor:"white"},errors:{color:e.palette.error.main},formControl:{fontSize:"30px",textAlign:"center"},image:{width:128,height:128},level:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},"popup-content":{position:"fixed",background:"#f83d23",width:"100px",height:"100px",display:"flex",justifyContent:"center",alignItems:"center",boxShadow:"0 0 6px #000",color:"#fff"},title:{alignItems:"center",display:"flex",height:"100%",paddingLeft:"10px",width:"100%"},header:{fontSize:3*e.spacing.unit,fontWeight:400,height:"100%",minHeight:"40px",width:"100%"},headerBody:{padding:"40px"},hero:{padding:" 0 24px "},heroUnit:{backgroundColor:e.palette.background.paper},heroContent:{margin:"0 auto",padding:"".concat(8*e.spacing.unit,"px 0 ").concat(6*e.spacing.unit,"px")},inputHeader:{background:"white",minHeight:"40px"},list:{margin:"0 auto"},masthead:Object(a.a)({background:"url(".concat(i.a,") center/cover")},e.breakpoints.down("xs"),{background:"url(".concat(d.a,") center/cover"),backgroundPositionX:"44%"}),mastSubText:(t={},Object(a.a)(t,e.breakpoints.up("xs"),{display:"none"}),Object(a.a)(t,e.breakpoints.up("sm"),{display:"flex",color:"white"}),t),mastText:(n={},Object(a.a)(n,e.breakpoints.up("md"),{}),Object(a.a)(n,e.breakpoints.up("lg"),{}),n),root:{position:"relative",margin:"0 auto",width:"100%"},section_odd:Object(a.a)({flexDirection:"row",justifyContent:"center",padding:2*e.spacing.unit,margin:"10px auto 50px",maxWidth:900},"@media (max-width:770px)",{flexDirection:"column-reverse",height:"480px"}),section_odd_home:Object(a.a)({flexDirection:"row",height:"450px",justifyContent:"center",padding:2*e.spacing.unit,margin:"10px auto 50px",maxWidth:1330},"@media (max-width:770px)",{flexDirection:"column-reverse",height:"680px"}),section:Object(a.a)({flexDirection:"row",justifyContent:"center",padding:2*e.spacing.unit,margin:"10px auto 50px",maxWidth:900},"@media (max-width:770px)",{flexDirection:"column",height:"480px"}),section_home:Object(a.a)({flexDirection:"row",height:"450px",justifyContent:"center",padding:2*e.spacing.unit,margin:"10px auto 50px",maxWidth:1330},"@media (max-width:770px)",{flexDirection:"column",height:"680px"}),stay_informed:Object(a.a)({flexDirection:"row",height:"450px",padding:2*e.spacing.unit,justifyContent:"center",textAlign:"center",maxWidth:900,marginTop:"120px"},"@media (max-width:770px)",{flexDirection:"column",height:"630px"}),social_section:Object(a.a)({flexDirection:"row",height:"450px",padding:2*e.spacing.unit,maxWidth:1330},"@media (max-width:770px)",{flexDirection:"column",height:"900px"}),section_text:{fontSize:"1.5em"},speak:Object(a.a)({color:"rgb(206, 0, 0)"},e.breakpoints.down("xs"),{fontSize:"40px",fontWeight:600}),text:{color:"black"}}}},749:function(e,t,n){e.exports=n.p+"static/media/home_header4.69e0da01.jpg"},750:function(e,t,n){e.exports=n.p+"static/media/home_header4_xs.68e514ca.jpg"},774:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return r}));n(811);var a=function(e,t,n,a){return new Promise((function(r){var i=new FormData;i.append("file",e),i.append("folder",n),i.append("tags",a),i.append("cloud_name",Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).CLOUDINARY_CLOUD_NAME),i.append("upload_preset",Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).CLOUDINARY_UPLOAD_PRESET);var o=new XMLHttpRequest;o.open("POST","https://api.cloudinary.com/v1_1/".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).CLOUDINARY_CLOUD_NAME,"/").concat(t,"/upload"),!0),o.onload=function(){r(JSON.parse(o.response))},o.onerror=function(){r(void 0)},o.send(i)}))},r=function(e){var t=e.split("/"),n=t[t.length-1];return n=n.substring(0,n.lastIndexOf(".")),console.log(typeof n),console.log(n),n}},810:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r}));var a=function(e){if(0===e)return"0 Bytes";var t=parseInt(Math.floor(Math.log(e)/Math.log(1e3)),10);return(e/Math.pow(1e3,t)).toPrecision(3)+" "+["Bytes","KB","MB","GB","TB"][t]},r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!e||0===e)return"";e>=1e3&&(t=1);var n=["","K","M","B","T"],a=Math.floor(Math.log10(Math.abs(e))/3),r=Math.max(0,Math.min(a,n.length-1)),i=n[r];return(e/Math.pow(10,3*r)).toFixed(t)+i}},826:function(e,t,n){"use strict";(function(n,a){var r;function i(e,t){if(!e)throw"First parameter is required.";t=new o(e,t=t||{type:"video"});var n=this;function a(n){n&&(t.initCallback=function(){n(),n=t.initCallback=null});var a=new d(e,t);(f=new a(e,t)).record(),l("recording"),t.disableLogs||console.log("Initialized recorderType:",f.constructor.name,"for output-type:",t.type)}function r(e){if(e=e||function(){},f){if("paused"===n.state)return n.resumeRecording(),void setTimeout((function(){r(e)}),1);"recording"===n.state||t.disableLogs||console.warn('Recording state should be: "recording", however current state is: ',n.state),t.disableLogs||console.log("Stopped recording "+t.type+" stream."),"gif"!==t.type?f.stop(a):(f.stop(),a()),l("stopped")}else m();function a(a){if(f){Object.keys(f).forEach((function(e){"function"!==typeof f[e]&&(n[e]=f[e])}));var r=f.blob;if(!r){if(!a)throw"Recording failed.";f.blob=r=a}if(r&&!t.disableLogs&&console.log(r.type,"->",S(r.size)),e){var i;try{i=h.createObjectURL(r)}catch(o){}"function"===typeof e.call?e.call(n,i):e(i)}t.autoWriteToDisk&&c((function(e){var n={};n[t.type+"Blob"]=e,U.Store(n)}))}else"function"===typeof e.call?e.call(n,""):e("")}}function s(e){postMessage((new FileReaderSync).readAsDataURL(e))}function c(e,n){if(!e)throw"Pass a callback function over getDataURL.";var a=n?n.blob:(f||{}).blob;if(!a)return t.disableLogs||console.warn("Blob encoder did not finish its job yet."),void setTimeout((function(){c(e,n)}),1e3);if("undefined"===typeof Worker||navigator.mozGetUserMedia){var r=new FileReader;r.readAsDataURL(a),r.onload=function(t){e(t.target.result)}}else{var i=function(e){try{var t=h.createObjectURL(new Blob([e.toString(),"this.onmessage =  function (eee) {"+e.name+"(eee.data);}"],{type:"application/javascript"})),n=new Worker(t);return h.revokeObjectURL(t),n}catch(a){}}(s);i.onmessage=function(t){e(t.data)},i.postMessage(a)}}function u(e){e=e||0,"paused"!==n.state?"stopped"!==n.state&&(e>=n.recordingDuration?r(n.onRecordingStopped):(e+=1e3,setTimeout((function(){u(e)}),1e3))):setTimeout((function(){u(e)}),1e3)}function l(e){n&&(n.state=e,"function"===typeof n.onStateChanged.call?n.onStateChanged.call(n,e):n.onStateChanged(e))}var f,p='It seems that recorder is destroyed or "startRecording" is not invoked for '+t.type+" recorder.";function m(){!0!==t.disableLogs&&console.warn(p)}var g={startRecording:function(r){return t.disableLogs||console.log("RecordRTC version: ",n.version),r&&(t=new o(e,r)),t.disableLogs||console.log("started recording "+t.type+" stream."),f?(f.clearRecordedData(),f.record(),l("recording"),n.recordingDuration&&u(),n):(a((function(){n.recordingDuration&&u()})),n)},stopRecording:r,pauseRecording:function(){f?"recording"===n.state?(l("paused"),f.pause(),t.disableLogs||console.log("Paused recording.")):t.disableLogs||console.warn("Unable to pause the recording. Recording state: ",n.state):m()},resumeRecording:function(){f?"paused"===n.state?(l("recording"),f.resume(),t.disableLogs||console.log("Resumed recording.")):t.disableLogs||console.warn("Unable to resume the recording. Recording state: ",n.state):m()},initRecorder:a,setRecordingDuration:function(e,t){if("undefined"===typeof e)throw"recordingDuration is required.";if("number"!==typeof e)throw"recordingDuration must be a number.";return n.recordingDuration=e,n.onRecordingStopped=t||function(){},{onRecordingStopped:function(e){n.onRecordingStopped=e}}},clearRecordedData:function(){f?(f.clearRecordedData(),t.disableLogs||console.log("Cleared old recorded data.")):m()},getBlob:function(){if(f)return f.blob;m()},getDataURL:c,toURL:function(){if(f)return h.createObjectURL(f.blob);m()},getInternalRecorder:function(){return f},save:function(e){f?R(f.blob,e):m()},getFromDisk:function(e){f?i.getFromDisk(t.type,e):m()},setAdvertisementArray:function(e){t.advertisement=[];for(var n=e.length,a=0;a<n;a++)t.advertisement.push({duration:a,image:e[a]})},blob:null,bufferSize:0,sampleRate:0,buffer:null,reset:function(){"recording"!==n.state||t.disableLogs||console.warn("Stop an active recorder."),f&&"function"===typeof f.clearRecordedData&&f.clearRecordedData(),f=null,l("inactive"),n.blob=null},onStateChanged:function(e){t.disableLogs||console.log("Recorder state changed:",e)},state:"inactive",getState:function(){return n.state},destroy:function(){var e=t.disableLogs;t={disableLogs:!0},n.reset(),l("destroyed"),g=n=null,M.AudioContextConstructor&&(M.AudioContextConstructor.close(),M.AudioContextConstructor=null),t.disableLogs=e,t.disableLogs||console.log("RecordRTC is destroyed.")},version:"5.5.9"};if(!this)return n=g,g;for(var v in g)this[v]=g[v];return n=this,g}function o(e,t){return t.recorderType||t.type||(t.audio&&t.video?t.type="video":t.audio&&!t.video&&(t.type="audio")),t.recorderType&&!t.type&&(t.recorderType===D||t.recorderType===L||t.recorderType===I?t.type="video":t.recorderType===j?t.type="gif":t.recorderType===O?t.type="audio":t.recorderType===E&&(C(e,"audio").length&&C(e,"video").length||!C(e,"audio").length&&C(e,"video").length?t.type="video":C(e,"audio").length&&!C(e,"video").length&&(t.type="audio"))),"undefined"!==typeof MediaRecorder&&"requestData"in MediaRecorder.prototype&&(t.mimeType||(t.mimeType="video/webm"),t.type||(t.type=t.mimeType.split("/")[0]),t.bitsPerSecond),t.type||(t.mimeType&&(t.type=t.mimeType.split("/")[0]),t.type||(t.type="audio")),t}function d(e,t){var n;return(b||m||g)&&(n=O),"undefined"!==typeof MediaRecorder&&"requestData"in MediaRecorder.prototype&&!b&&(n=E),"video"===t.type&&(b||g)&&(n=D,"undefined"!==typeof ReadableStream&&(n=I)),"gif"===t.type&&(n=j),"canvas"===t.type&&(n=L),T()&&n!==L&&n!==j&&"undefined"!==typeof MediaRecorder&&"requestData"in MediaRecorder.prototype&&(C(e,"video").length||C(e,"audio").length)&&("audio"===t.type?"function"===typeof MediaRecorder.isTypeSupported&&MediaRecorder.isTypeSupported("audio/webm")&&(n=E):"function"===typeof MediaRecorder.isTypeSupported&&MediaRecorder.isTypeSupported("video/webm")&&(n=E)),e instanceof Array&&e.length&&(n=B),t.recorderType&&(n=t.recorderType),!t.disableLogs&&n&&n.name&&console.log("Using recorderType:",n.name||n.constructor.name),!n&&y&&(n=E),n}function s(e){this.addStream=function(t){t&&(e=t)},this.mediaType={audio:!0,video:!0},this.startRecording=function(){var t,n=this.mediaType,a=this.mimeType||{audio:null,video:null,gif:null};if("function"!==typeof n.audio&&T()&&!C(e,"audio").length&&(n.audio=!1),"function"!==typeof n.video&&T()&&!C(e,"video").length&&(n.video=!1),"function"!==typeof n.gif&&T()&&!C(e,"video").length&&(n.gif=!1),!n.audio&&!n.video&&!n.gif)throw"MediaStream must have either audio or video tracks.";if(n.audio&&(t=null,"function"===typeof n.audio&&(t=n.audio),this.audioRecorder=new i(e,{type:"audio",bufferSize:this.bufferSize,sampleRate:this.sampleRate,numberOfAudioChannels:this.numberOfAudioChannels||2,disableLogs:this.disableLogs,recorderType:t,mimeType:a.audio,timeSlice:this.timeSlice,onTimeStamp:this.onTimeStamp}),n.video||this.audioRecorder.startRecording()),n.video){t=null,"function"===typeof n.video&&(t=n.video);var r=e;if(T()&&n.audio&&"function"===typeof n.audio){var o=C(e,"video")[0];v?((r=new w).addTrack(o),t&&t===D&&(t=E)):(r=new w).addTrack(o)}this.videoRecorder=new i(r,{type:"video",video:this.video,canvas:this.canvas,frameInterval:this.frameInterval||10,disableLogs:this.disableLogs,recorderType:t,mimeType:a.video,timeSlice:this.timeSlice,onTimeStamp:this.onTimeStamp,workerPath:this.workerPath,webAssemblyPath:this.webAssemblyPath,frameRate:this.frameRate,bitrate:this.bitrate}),n.audio||this.videoRecorder.startRecording()}if(n.audio&&n.video){var d=this,s=!0===T();(n.audio instanceof O&&n.video||!0!==n.audio&&!0!==n.video&&n.audio!==n.video)&&(s=!1),!0===s?(d.audioRecorder=null,d.videoRecorder.startRecording()):d.videoRecorder.initRecorder((function(){d.audioRecorder.initRecorder((function(){d.videoRecorder.startRecording(),d.audioRecorder.startRecording()}))}))}n.gif&&(t=null,"function"===typeof n.gif&&(t=n.gif),this.gifRecorder=new i(e,{type:"gif",frameRate:this.frameRate||200,quality:this.quality||10,disableLogs:this.disableLogs,recorderType:t,mimeType:a.gif}),this.gifRecorder.startRecording())},this.stopRecording=function(e){e=e||function(){},this.audioRecorder&&this.audioRecorder.stopRecording((function(t){e(t,"audio")})),this.videoRecorder&&this.videoRecorder.stopRecording((function(t){e(t,"video")})),this.gifRecorder&&this.gifRecorder.stopRecording((function(t){e(t,"gif")}))},this.pauseRecording=function(){this.audioRecorder&&this.audioRecorder.pauseRecording(),this.videoRecorder&&this.videoRecorder.pauseRecording(),this.gifRecorder&&this.gifRecorder.pauseRecording()},this.resumeRecording=function(){this.audioRecorder&&this.audioRecorder.resumeRecording(),this.videoRecorder&&this.videoRecorder.resumeRecording(),this.gifRecorder&&this.gifRecorder.resumeRecording()},this.getBlob=function(e){var t={};return this.audioRecorder&&(t.audio=this.audioRecorder.getBlob()),this.videoRecorder&&(t.video=this.videoRecorder.getBlob()),this.gifRecorder&&(t.gif=this.gifRecorder.getBlob()),e&&e(t),t},this.destroy=function(){this.audioRecorder&&(this.audioRecorder.destroy(),this.audioRecorder=null),this.videoRecorder&&(this.videoRecorder.destroy(),this.videoRecorder=null),this.gifRecorder&&(this.gifRecorder.destroy(),this.gifRecorder=null)},this.getDataURL=function(e){function t(e,t){if("undefined"!==typeof Worker){var n=function(e){var t,n=h.createObjectURL(new Blob([e.toString(),"this.onmessage =  function (eee) {"+e.name+"(eee.data);}"],{type:"application/javascript"})),a=new Worker(n);if("undefined"!==typeof h)t=h;else{if("undefined"===typeof webkitURL)throw"Neither URL nor webkitURL detected.";t=webkitURL}return t.revokeObjectURL(n),a}((function(e){postMessage((new FileReaderSync).readAsDataURL(e))}));n.onmessage=function(e){t(e.data)},n.postMessage(e)}else{var a=new FileReader;a.readAsDataURL(e),a.onload=function(e){t(e.target.result)}}}this.getBlob((function(n){n.audio&&n.video?t(n.audio,(function(a){t(n.video,(function(t){e({audio:a,video:t})}))})):n.audio?t(n.audio,(function(t){e({audio:t})})):n.video&&t(n.video,(function(t){e({video:t})}))}))},this.writeToDisk=function(){i.writeToDisk({audio:this.audioRecorder,video:this.videoRecorder,gif:this.gifRecorder})},this.save=function(e){(e=e||{audio:!0,video:!0,gif:!0}).audio&&this.audioRecorder&&this.audioRecorder.save("string"===typeof e.audio?e.audio:""),e.video&&this.videoRecorder&&this.videoRecorder.save("string"===typeof e.video?e.video:""),e.gif&&this.gifRecorder&&this.gifRecorder.save("string"===typeof e.gif?e.gif:"")}}i.version="5.5.9",e.exports=i,void 0===(r=function(){return i}.apply(t,[]))||(e.exports=r),i.getFromDisk=function(e,t){if(!t)throw"callback is mandatory.";console.log("Getting recorded "+("all"===e?"blobs":e+" blob ")+" from disk!"),U.Fetch((function(n,a){"all"!==e&&a===e+"Blob"&&t&&t(n),"all"===e&&t&&t(n,a.replace("Blob",""))}))},i.writeToDisk=function(e){console.log("Writing recorded blob(s) to disk!"),(e=e||{}).audio&&e.video&&e.gif?e.audio.getDataURL((function(t){e.video.getDataURL((function(n){e.gif.getDataURL((function(e){U.Store({audioBlob:t,videoBlob:n,gifBlob:e})}))}))})):e.audio&&e.video?e.audio.getDataURL((function(t){e.video.getDataURL((function(e){U.Store({audioBlob:t,videoBlob:e})}))})):e.audio&&e.gif?e.audio.getDataURL((function(t){e.gif.getDataURL((function(e){U.Store({audioBlob:t,gifBlob:e})}))})):e.video&&e.gif?e.video.getDataURL((function(t){e.gif.getDataURL((function(e){U.Store({videoBlob:t,gifBlob:e})}))})):e.audio?e.audio.getDataURL((function(e){U.Store({audioBlob:e})})):e.video?e.video.getDataURL((function(e){U.Store({videoBlob:e})})):e.gif&&e.gif.getDataURL((function(e){U.Store({gifBlob:e})}))},s.getFromDisk=i.getFromDisk,s.writeToDisk=i.writeToDisk,i.MRecordRTC=s;var c;(c="undefined"!==typeof n?n:null)&&"undefined"===typeof window&&"undefined"!==typeof n&&(n.navigator={userAgent:"Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45",getUserMedia:function(){}},n.console||(n.console={}),"undefined"!==typeof n.console.log&&"undefined"!==typeof n.console.error||(n.console.error=n.console.log=n.console.log||function(){console.log(arguments)}),"undefined"===typeof document&&(c.document={documentElement:{appendChild:function(){return""}}},document.createElement=document.captureStream=document.mozCaptureStream=function(){var e={getContext:function(){return e},play:function(){},pause:function(){},drawImage:function(){},toDataURL:function(){return""},style:{}};return e},c.HTMLVideoElement=function(){}),"undefined"===typeof location&&(c.location={protocol:"file:",href:"",hash:""}),"undefined"===typeof screen&&(c.screen={width:0,height:0}),"undefined"===typeof h&&(c.URL={createObjectURL:function(){return""},revokeObjectURL:function(){return""}}),c.window=n);var u=window.requestAnimationFrame;if("undefined"===typeof u)if("undefined"!==typeof webkitRequestAnimationFrame)u=webkitRequestAnimationFrame;else if("undefined"!==typeof mozRequestAnimationFrame)u=mozRequestAnimationFrame;else if("undefined"!==typeof msRequestAnimationFrame)u=msRequestAnimationFrame;else if("undefined"===typeof u){var l=0;u=function(e,t){var n=(new Date).getTime(),a=Math.max(0,16-(n-l)),r=setTimeout((function(){e(n+a)}),a);return l=n+a,r}}var f=window.cancelAnimationFrame;"undefined"===typeof f&&("undefined"!==typeof webkitCancelAnimationFrame?f=webkitCancelAnimationFrame:"undefined"!==typeof mozCancelAnimationFrame?f=mozCancelAnimationFrame:"undefined"!==typeof msCancelAnimationFrame?f=msCancelAnimationFrame:"undefined"===typeof f&&(f=function(e){clearTimeout(e)}));var p=window.AudioContext;"undefined"===typeof p&&("undefined"!==typeof webkitAudioContext&&(p=webkitAudioContext),"undefined"!==typeof mozAudioContext&&(p=mozAudioContext));var h=window.URL;"undefined"===typeof h&&"undefined"!==typeof webkitURL&&(h=webkitURL),"undefined"!==typeof navigator&&"undefined"===typeof navigator.getUserMedia&&("undefined"!==typeof navigator.webkitGetUserMedia&&(navigator.getUserMedia=navigator.webkitGetUserMedia),"undefined"!==typeof navigator.mozGetUserMedia&&(navigator.getUserMedia=navigator.mozGetUserMedia));var m=-1!==navigator.userAgent.indexOf("Edge")&&(!!navigator.msSaveBlob||!!navigator.msSaveOrOpenBlob),g=!!window.opera||-1!==navigator.userAgent.indexOf("OPR/"),v=navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&"netscape"in window&&/ rv:/.test(navigator.userAgent),b=!g&&!m&&!!navigator.webkitGetUserMedia||x()||-1!==navigator.userAgent.toLowerCase().indexOf("chrome/"),y=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);y&&!b&&-1!==navigator.userAgent.indexOf("CriOS")&&(y=!1,b=!0);var w=window.MediaStream;function S(e){if(0===e)return"0 Bytes";var t=parseInt(Math.floor(Math.log(e)/Math.log(1e3)),10);return(e/Math.pow(1e3,t)).toPrecision(3)+" "+["Bytes","KB","MB","GB","TB"][t]}function R(e,t){if(!e)throw"Blob object is required.";if(!e.type)try{e.type="video/webm"}catch(o){}var n=(e.type||"video/webm").split("/")[1];if(t&&-1!==t.indexOf(".")){var a=t.split(".");t=a[0],n=a[1]}var r=(t||Math.round(9999999999*Math.random())+888888888)+"."+n;if("undefined"!==typeof navigator.msSaveOrOpenBlob)return navigator.msSaveOrOpenBlob(e,r);if("undefined"!==typeof navigator.msSaveBlob)return navigator.msSaveBlob(e,r);var i=document.createElement("a");i.href=h.createObjectURL(e),i.download=r,i.style="display:none;opacity:0;color:transparent;",(document.body||document.documentElement).appendChild(i),"function"===typeof i.click?i.click():(i.target="_blank",i.dispatchEvent(new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0}))),h.revokeObjectURL(i.href)}function x(){return"undefined"!==typeof window&&"object"===typeof window.process&&"renderer"===window.process.type||(!("undefined"===typeof a||"object"!==typeof a.versions||!a.versions.electron)||"object"===typeof navigator&&"string"===typeof navigator.userAgent&&navigator.userAgent.indexOf("Electron")>=0)}function C(e,t){return e&&e.getTracks?e.getTracks().filter((function(e){return e.kind===(t||"audio")})):[]}function k(e,t){"srcObject"in t?t.srcObject=e:"mozSrcObject"in t?t.mozSrcObject=e:t.srcObject=e}"undefined"===typeof w&&"undefined"!==typeof webkitMediaStream&&(w=webkitMediaStream),"undefined"!==typeof w&&"undefined"===typeof w.prototype.stop&&(w.prototype.stop=function(){this.getTracks().forEach((function(e){e.stop()}))}),i.invokeSaveAsDialog=R,i.getTracks=C,i.getSeekableBlob=function(e,t){if("undefined"===typeof EBML)throw new Error("Please link: https://www.webrtc-experiment.com/EBML.js");var n=new EBML.Reader,a=new EBML.Decoder,r=EBML.tools,i=new FileReader;i.onload=function(e){a.decode(this.result).forEach((function(e){n.read(e)})),n.stop();var i=r.makeMetadataSeekable(n.metadatas,n.duration,n.cues),o=this.result.slice(n.metadataSize),d=new Blob([i,o],{type:"video/webm"});t(d)},i.readAsArrayBuffer(e)},i.bytesToSize=S,i.isElectron=x;var M={};function T(){if(v||y||m)return!0;navigator.appVersion;var e,t,n=navigator.userAgent,a=""+parseFloat(navigator.appVersion),r=parseInt(navigator.appVersion,10);return(b||g)&&(e=n.indexOf("Chrome"),a=n.substring(e+7)),-1!==(t=a.indexOf(";"))&&(a=a.substring(0,t)),-1!==(t=a.indexOf(" "))&&(a=a.substring(0,t)),r=parseInt(""+a,10),isNaN(r)&&(a=""+parseFloat(navigator.appVersion),r=parseInt(navigator.appVersion,10)),r>=49}function E(e,t){var n=this;if("undefined"===typeof e)throw'First argument "MediaStream" is required.';if("undefined"===typeof MediaRecorder)throw"Your browser does not support the Media Recorder API. Please try other modules e.g. WhammyRecorder or StereoAudioRecorder.";if("audio"===(t=t||{mimeType:"video/webm"}).type){var a;if(C(e,"video").length&&C(e,"audio").length)navigator.mozGetUserMedia?(a=new w).addTrack(C(e,"audio")[0]):a=new w(C(e,"audio")),e=a;t.mimeType&&-1!==t.mimeType.toString().toLowerCase().indexOf("audio")||(t.mimeType=b?"audio/webm":"audio/ogg"),t.mimeType&&"audio/ogg"!==t.mimeType.toString().toLowerCase()&&navigator.mozGetUserMedia&&(t.mimeType="audio/ogg")}var r,i=[];function o(){n.timestamps.push((new Date).getTime()),"function"===typeof t.onTimeStamp&&t.onTimeStamp(n.timestamps[n.timestamps.length-1],n.timestamps)}function d(e){return r&&r.mimeType?r.mimeType:e.mimeType||"video/webm"}function s(){i=[],r=null,n.timestamps=[]}this.getArrayOfBlobs=function(){return i},this.record=function(){n.blob=null,n.clearRecordedData(),n.timestamps=[],c=[],i=[];var a=t;t.disableLogs||console.log("Passing following config over MediaRecorder API.",a),r&&(r=null),b&&!T()&&(a="video/vp8"),"function"===typeof MediaRecorder.isTypeSupported&&a.mimeType&&(MediaRecorder.isTypeSupported(a.mimeType)||(t.disableLogs||console.warn("MediaRecorder API seems unable to record mimeType:",a.mimeType),a.mimeType="audio"===t.type?"audio/webm":"video/webm"));try{r=new MediaRecorder(e,a),t.mimeType=a.mimeType}catch(s){r=new MediaRecorder(e)}a.mimeType&&!MediaRecorder.isTypeSupported&&"canRecordMimeType"in r&&!1===r.canRecordMimeType(a.mimeType)&&(t.disableLogs||console.warn("MediaRecorder API seems unable to record mimeType:",a.mimeType)),r.ondataavailable=function(e){if(e.data&&c.push("ondataavailable: "+S(e.data.size)),"number"!==typeof t.timeSlice)!e.data||!e.data.size||e.data.size<100||n.blob?n.recordingCallback&&(n.recordingCallback(new Blob([],{type:d(a)})),n.recordingCallback=null):(n.blob=t.getNativeBlob?e.data:new Blob([e.data],{type:d(a)}),n.recordingCallback&&(n.recordingCallback(n.blob),n.recordingCallback=null));else if(e.data&&e.data.size&&e.data.size>100&&(i.push(e.data),o(),"function"===typeof t.ondataavailable)){var r=t.getNativeBlob?e.data:new Blob([e.data],{type:d(a)});t.ondataavailable(r)}},r.onstart=function(){c.push("started")},r.onpause=function(){c.push("paused")},r.onresume=function(){c.push("resumed")},r.onstop=function(){c.push("stopped")},r.onerror=function(e){e&&(e.name||(e.name="UnknownError"),c.push("error: "+e),t.disableLogs||(-1!==e.name.toString().toLowerCase().indexOf("invalidstate")?console.error("The MediaRecorder is not in a state in which the proposed operation is allowed to be executed.",e):-1!==e.name.toString().toLowerCase().indexOf("notsupported")?console.error("MIME type (",a.mimeType,") is not supported.",e):-1!==e.name.toString().toLowerCase().indexOf("security")?console.error("MediaRecorder security error",e):"OutOfMemory"===e.name?console.error("The UA has exhaused the available memory. User agents SHOULD provide as much additional information as possible in the message attribute.",e):"IllegalStreamModification"===e.name?console.error("A modification to the stream has occurred that makes it impossible to continue recording. An example would be the addition of a Track while recording is occurring. User agents SHOULD provide as much additional information as possible in the message attribute.",e):"OtherRecordingError"===e.name?console.error("Used for an fatal error other than those listed above. User agents SHOULD provide as much additional information as possible in the message attribute.",e):"GenericError"===e.name?console.error("The UA cannot provide the codec or recording option that has been requested.",e):console.error("MediaRecorder Error",e)),function(e){if(!n.manuallyStopped&&r&&"inactive"===r.state)return delete t.timeslice,void r.start(6e5);setTimeout(void 0,1e3)}(),"inactive"!==r.state&&"stopped"!==r.state&&r.stop())},"number"===typeof t.timeSlice?(o(),r.start(t.timeSlice)):r.start(36e5),t.initCallback&&t.initCallback()},this.timestamps=[],this.stop=function(e){e=e||function(){},n.manuallyStopped=!0,r&&(this.recordingCallback=e,"recording"===r.state&&r.stop(),"number"===typeof t.timeSlice&&setTimeout((function(){n.blob=new Blob(i,{type:d(t)}),n.recordingCallback(n.blob)}),100))},this.pause=function(){r&&"recording"===r.state&&r.pause()},this.resume=function(){r&&"paused"===r.state&&r.resume()},this.clearRecordedData=function(){r&&"recording"===r.state&&n.stop(s),s()},this.getInternalRecorder=function(){return r},this.blob=null,this.getState=function(){return r&&r.state||"inactive"};var c=[];this.getAllStates=function(){return c},"undefined"===typeof t.checkForInactiveTracks&&(t.checkForInactiveTracks=!1);n=this;!function a(){if(r&&!1!==t.checkForInactiveTracks)return!1===function(){if("active"in e){if(!e.active)return!1}else if("ended"in e&&e.ended)return!1;return!0}()?(t.disableLogs||console.log("MediaStream seems stopped."),void n.stop()):void setTimeout(a,1e3)}(),this.name="MediaStreamRecorder",this.toString=function(){return this.name}}function O(e,t){if(!C(e,"audio").length)throw"Your stream has no audio tracks.";var n,a=this,r=[],o=[],d=!1,s=0,c=2,u=(t=t||{}).desiredSampRate;function l(){if(!1===t.checkForInactiveTracks)return!0;if("active"in e){if(!e.active)return!1}else if("ended"in e&&e.ended)return!1;return!0}function f(e,t){function n(e,t){var n,a=e.numberOfAudioChannels,r=e.leftBuffers.slice(0),i=e.rightBuffers.slice(0),o=e.sampleRate,d=e.internalInterleavedLength,s=e.desiredSampRate;function c(e,t,n){var a=Math.round(e.length*(t/n)),r=[],i=Number((e.length-1)/(a-1));r[0]=e[0];for(var o=1;o<a-1;o++){var d=o*i,s=Number(Math.floor(d)).toFixed(),c=Number(Math.ceil(d)).toFixed(),l=d-s;r[o]=u(e[s],e[c],l)}return r[a-1]=e[e.length-1],r}function u(e,t,n){return e+(t-e)*n}function l(e,t){for(var n=new Float64Array(t),a=0,r=e.length,i=0;i<r;i++){var o=e[i];n.set(o,a),a+=o.length}return n}function f(e,t,n){for(var a=n.length,r=0;r<a;r++)e.setUint8(t+r,n.charCodeAt(r))}2===a&&(r=l(r,d),i=l(i,d),s&&(r=c(r,s,o),i=c(i,s,o))),1===a&&(r=l(r,d),s&&(r=c(r,s,o))),s&&(o=s),2===a&&(n=function(e,t){for(var n=e.length+t.length,a=new Float64Array(n),r=0,i=0;i<n;)a[i++]=e[r],a[i++]=t[r],r++;return a}(r,i)),1===a&&(n=r);var p=n.length,h=new ArrayBuffer(44+2*p),m=new DataView(h);f(m,0,"RIFF"),m.setUint32(4,36+2*p,!0),f(m,8,"WAVE"),f(m,12,"fmt "),m.setUint32(16,16,!0),m.setUint16(20,1,!0),m.setUint16(22,a,!0),m.setUint32(24,o,!0),m.setUint32(28,2*o,!0),m.setUint16(32,2*a,!0),m.setUint16(34,16,!0),f(m,36,"data"),m.setUint32(40,2*p,!0);for(var g=p,v=44,b=0;b<g;b++)m.setInt16(v,32767*n[b],!0),v+=2;if(t)return t({buffer:h,view:m});postMessage({buffer:h,view:m})}if(e.noWorker)n(e,(function(e){t(e.buffer,e.view)}));else{var a=function(e){var t=h.createObjectURL(new Blob([e.toString(),";this.onmessage =  function (eee) {"+e.name+"(eee.data);}"],{type:"application/javascript"})),n=new Worker(t);return n.workerURL=t,n}(n);a.onmessage=function(e){t(e.data.buffer,e.data.view),h.revokeObjectURL(a.workerURL),a.terminate()},a.postMessage(e)}}!0===t.leftChannel&&(c=1),1===t.numberOfAudioChannels&&(c=1),(!c||c<1)&&(c=2),t.disableLogs||console.log("StereoAudioRecorder is set to record number of channels: "+c),"undefined"===typeof t.checkForInactiveTracks&&(t.checkForInactiveTracks=!0),this.record=function(){if(!1===l())throw"Please make sure MediaStream is active.";w(),R=y=!1,d=!0,"undefined"!==typeof t.timeSlice&&k()},this.stop=function(e){e=e||function(){},d=!1,f({desiredSampRate:u,sampleRate:b,numberOfAudioChannels:c,internalInterleavedLength:s,leftBuffers:r,rightBuffers:1===c?[]:o,noWorker:t.noWorker},(function(t,n){a.blob=new Blob([n],{type:"audio/wav"}),a.buffer=new ArrayBuffer(n.buffer.byteLength),a.view=n,a.sampleRate=u||b,a.bufferSize=v,a.length=s,R=!1,e&&e(a.blob)}))},"undefined"===typeof i.Storage&&(i.Storage={AudioContextConstructor:null,AudioContext:window.AudioContext||window.webkitAudioContext}),i.Storage.AudioContextConstructor&&"closed"!==i.Storage.AudioContextConstructor.state||(i.Storage.AudioContextConstructor=new i.Storage.AudioContext);var p=i.Storage.AudioContextConstructor,m=p.createMediaStreamSource(e),g=[0,256,512,1024,2048,4096,8192,16384],v="undefined"===typeof t.bufferSize?4096:t.bufferSize;if(-1===g.indexOf(v)&&(t.disableLogs||console.log("Legal values for buffer-size are "+JSON.stringify(g,null,"\t"))),p.createJavaScriptNode)n=p.createJavaScriptNode(v,c,c);else{if(!p.createScriptProcessor)throw"WebAudio API has no support on this browser.";n=p.createScriptProcessor(v,c,c)}m.connect(n),t.bufferSize||(v=n.bufferSize);var b="undefined"!==typeof t.sampleRate?t.sampleRate:p.sampleRate||44100;(b<22050||b>96e3)&&(t.disableLogs||console.log("sample-rate must be under range 22050 and 96000.")),t.disableLogs||t.desiredSampRate&&console.log("Desired sample-rate: "+t.desiredSampRate);var y=!1;function w(){r=[],o=[],s=0,R=!1,d=!1,y=!1,p=null,a.leftchannel=r,a.rightchannel=o,a.numberOfAudioChannels=c,a.desiredSampRate=u,a.sampleRate=b,a.recordingLength=s,x={left:[],right:[],recordingLength:0}}function S(){n&&(n.onaudioprocess=null,n.disconnect(),n=null),m&&(m.disconnect(),m=null),w()}this.pause=function(){y=!0},this.resume=function(){if(!1===l())throw"Please make sure MediaStream is active.";if(!d)return t.disableLogs||console.log("Seems recording has been restarted."),void this.record();y=!1},this.clearRecordedData=function(){t.checkForInactiveTracks=!1,d&&this.stop(S),S()},this.name="StereoAudioRecorder",this.toString=function(){return this.name};var R=!1;n.onaudioprocess=function(e){if(!y)if(!1===l()&&(t.disableLogs||console.log("MediaStream seems stopped."),n.disconnect(),d=!1),d){R||(R=!0,t.onAudioProcessStarted&&t.onAudioProcessStarted(),t.initCallback&&t.initCallback());var i=e.inputBuffer.getChannelData(0),u=new Float32Array(i);if(r.push(u),2===c){var f=e.inputBuffer.getChannelData(1),p=new Float32Array(f);o.push(p)}s+=v,a.recordingLength=s,"undefined"!==typeof t.timeSlice&&(x.recordingLength+=v,x.left.push(u),2===c&&x.right.push(p))}else m&&(m.disconnect(),m=null)},p.createMediaStreamDestination?n.connect(p.createMediaStreamDestination()):n.connect(p.destination),this.leftchannel=r,this.rightchannel=o,this.numberOfAudioChannels=c,this.desiredSampRate=u,this.sampleRate=b,a.recordingLength=s;var x={left:[],right:[],recordingLength:0};function k(){d&&"function"===typeof t.ondataavailable&&"undefined"!==typeof t.timeSlice&&(x.left.length?(f({desiredSampRate:u,sampleRate:b,numberOfAudioChannels:c,internalInterleavedLength:x.recordingLength,leftBuffers:x.left,rightBuffers:1===c?[]:x.right},(function(e,n){var a=new Blob([n],{type:"audio/wav"});t.ondataavailable(a),setTimeout(k,t.timeSlice)})),x={left:[],right:[],recordingLength:0}):setTimeout(k,t.timeSlice))}}function L(e,t){if("undefined"===typeof html2canvas)throw"Please link: https://www.webrtc-experiment.com/screenshot.js";(t=t||{}).frameInterval||(t.frameInterval=10);var n=!1;["captureStream","mozCaptureStream","webkitCaptureStream"].forEach((function(e){e in document.createElement("canvas")&&(n=!0)}));var a,r,i,o=(!!window.webkitRTCPeerConnection||!!window.webkitGetUserMedia)&&!!window.chrome,d=50,s=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);if(o&&s&&s[2]&&(d=parseInt(s[2],10)),o&&d<52&&(n=!1),t.useWhammyRecorder&&(n=!1),n)if(t.disableLogs||console.log("Your browser supports both MediRecorder API and canvas.captureStream!"),e instanceof HTMLCanvasElement)a=e;else{if(!(e instanceof CanvasRenderingContext2D))throw"Please pass either HTMLCanvasElement or CanvasRenderingContext2D.";a=e.canvas}else navigator.mozGetUserMedia&&(t.disableLogs||console.error("Canvas recording is NOT supported in Firefox."));this.record=function(){if(i=!0,n&&!t.useWhammyRecorder){var e;"captureStream"in a?e=a.captureStream(25):"mozCaptureStream"in a?e=a.mozCaptureStream(25):"webkitCaptureStream"in a&&(e=a.webkitCaptureStream(25));try{var o=new w;o.addTrack(C(e,"video")[0]),e=o}catch(d){}if(!e)throw"captureStream API are NOT available.";(r=new E(e,{mimeType:t.mimeType||"video/webm"})).record()}else h.frames=[],p=(new Date).getTime(),f();t.initCallback&&t.initCallback()},this.getWebPImages=function(n){if("canvas"===e.nodeName.toLowerCase()){var a=h.frames.length;h.frames.forEach((function(e,n){var r=a-n;t.disableLogs||console.log(r+"/"+a+" frames remaining"),t.onEncodingCallback&&t.onEncodingCallback(r,a);var i=e.image.toDataURL("image/webp",1);h.frames[n].image=i})),t.disableLogs||console.log("Generating WebM"),n()}else n()},this.stop=function(e){i=!1;var a=this;n&&r?r.stop(e):this.getWebPImages((function(){h.compile((function(n){t.disableLogs||console.log("Recording finished!"),a.blob=n,a.blob.forEach&&(a.blob=new Blob([],{type:"video/webm"})),e&&e(a.blob),h.frames=[]}))}))};var c=!1;function u(){h.frames=[],i=!1,c=!1}function l(){var t=document.createElement("canvas"),n=t.getContext("2d");return t.width=e.width,t.height=e.height,n.drawImage(e,0,0),t}function f(){if(c)return p=(new Date).getTime(),setTimeout(f,500);if("canvas"===e.nodeName.toLowerCase()){var n=(new Date).getTime()-p;return p=(new Date).getTime(),h.frames.push({image:l(),duration:n}),void(i&&setTimeout(f,t.frameInterval))}html2canvas(e,{grabMouse:"undefined"===typeof t.showMousePointer||t.showMousePointer,onrendered:function(e){var n=(new Date).getTime()-p;if(!n)return setTimeout(f,t.frameInterval);p=(new Date).getTime(),h.frames.push({image:e.toDataURL("image/webp",1),duration:n}),i&&setTimeout(f,t.frameInterval)}})}this.pause=function(){c=!0,r instanceof E&&r.pause()},this.resume=function(){c=!1,r instanceof E?r.resume():i||this.record()},this.clearRecordedData=function(){i&&this.stop(u),u()},this.name="CanvasRecorder",this.toString=function(){return this.name};var p=(new Date).getTime(),h=new A.Video(100)}function D(e,t){function n(e){e="undefined"!==typeof e?e:10;var t=(new Date).getTime()-s;return t?i?(s=(new Date).getTime(),setTimeout(n,100)):(s=(new Date).getTime(),d.paused&&d.play(),l.drawImage(d,0,0,u.width,u.height),c.frames.push({duration:t,image:u.toDataURL("image/webp")}),void(r||setTimeout(n,e,e))):setTimeout(n,e,e)}function a(e,t,n,a,r){var i=document.createElement("canvas");i.width=u.width,i.height=u.height;var o=i.getContext("2d"),d=[],s=-1===t,c=t&&t>0&&t<=e.length?t:e.length,l=0,f=0,p=0,h=Math.sqrt(Math.pow(255,2)+Math.pow(255,2)+Math.pow(255,2)),m=n&&n>=0&&n<=1?n:0,g=a&&a>=0&&a<=1?a:0,v=!1;!function(e){var t=-1,n=e.length;!function a(){++t!==n?setTimeout((function(){e.functionToLoop(a,t)}),1):e.callback()}()}({length:c,functionToLoop:function(t,n){var a,r,i,c=function(){!v&&i-a<=i*g||(s&&(v=!0),d.push(e[n])),t()};if(v)c();else{var b=new Image;b.onload=function(){o.drawImage(b,0,0,u.width,u.height);var e=o.getImageData(0,0,u.width,u.height);a=0,r=e.data.length,i=e.data.length/4;for(var t=0;t<r;t+=4){var n={r:e.data[t],g:e.data[t+1],b:e.data[t+2]};Math.sqrt(Math.pow(n.r-l,2)+Math.pow(n.g-f,2)+Math.pow(n.b-p,2))<=h*m&&a++}c()},b.src=e[n].image}},callback:function(){(d=d.concat(e.slice(c))).length<=0&&d.push(e[e.length-1]),r(d)}})}(t=t||{}).frameInterval||(t.frameInterval=10),t.disableLogs||console.log("Using frames-interval:",t.frameInterval),this.record=function(){t.width||(t.width=320),t.height||(t.height=240),t.video||(t.video={width:t.width,height:t.height}),t.canvas||(t.canvas={width:t.width,height:t.height}),u.width=t.canvas.width||320,u.height=t.canvas.height||240,l=u.getContext("2d"),t.video&&t.video instanceof HTMLVideoElement?(d=t.video.cloneNode(),t.initCallback&&t.initCallback()):(d=document.createElement("video"),k(e,d),d.onloadedmetadata=function(){t.initCallback&&t.initCallback()},d.width=t.video.width,d.height=t.video.height),d.muted=!0,d.play(),s=(new Date).getTime(),c=new A.Video,t.disableLogs||(console.log("canvas resolutions",u.width,"*",u.height),console.log("video width/height",d.width||u.width,"*",d.height||u.height)),n(t.frameInterval)};var r=!1;this.stop=function(e){e=e||function(){},r=!0;var n=this;setTimeout((function(){a(c.frames,-1,null,null,(function(a){c.frames=a,t.advertisement&&t.advertisement.length&&(c.frames=t.advertisement.concat(c.frames)),c.compile((function(t){n.blob=t,n.blob.forEach&&(n.blob=new Blob([],{type:"video/webm"})),e&&e(n.blob)}))}))}),10)};var i=!1;function o(){c.frames=[],r=!0,i=!1}this.pause=function(){i=!0},this.resume=function(){i=!1,r&&this.record()},this.clearRecordedData=function(){r||this.stop(o),o()},this.name="WhammyRecorder",this.toString=function(){return this.name};var d,s,c,u=document.createElement("canvas"),l=u.getContext("2d")}"undefined"!==typeof p?M.AudioContext=p:"undefined"!==typeof webkitAudioContext&&(M.AudioContext=webkitAudioContext),i.Storage=M,i.MediaStreamRecorder=E,i.StereoAudioRecorder=O,i.CanvasRecorder=L,i.WhammyRecorder=D;var A=function(){function e(e){this.frames=[],this.duration=e||1,this.quality=.8}function t(e){function t(e,t,n){return[{data:e,id:231}].concat(n.map((function(e){var n=function(e){var t=0;e.keyframe&&(t|=128);e.invisible&&(t|=8);e.lacing&&(t|=e.lacing<<1);e.discardable&&(t|=1);if(e.trackNum>127)throw"TrackNumber > 127 not supported";return[128|e.trackNum,e.timecode>>8,255&e.timecode,t].map((function(e){return String.fromCharCode(e)})).join("")+e.frame}({discardable:0,frame:e.data.slice(4),invisible:0,keyframe:1,lacing:0,trackNum:1,timecode:Math.round(t)});return t+=e.duration,{data:n,id:163}})))}function n(e){for(var t=[];e>0;)t.push(255&e),e>>=8;return new Uint8Array(t.reverse())}function a(e){var t=[];e=(e.length%8?new Array(9-e.length%8).join("0"):"")+e;for(var n=0;n<e.length;n+=8)t.push(parseInt(e.substr(n,8),2));return new Uint8Array(t)}function r(e,t){return parseInt(e.substr(t+4,4).split("").map((function(e){var t=e.charCodeAt(0).toString(2);return new Array(8-t.length+1).join("0")+t})).join(""),2)}var i=new function(e){var r=function(e){if(!e[0])return void postMessage({error:"Something went wrong. Maybe WebP format is not supported in the current browser."});for(var t=e[0].width,n=e[0].height,a=e[0].duration,r=1;r<e.length;r++)a+=e[r].duration;return{duration:a,width:t,height:n}}(e);if(!r)return[];for(var i,o=[{id:440786851,data:[{data:1,id:17030},{data:1,id:17143},{data:4,id:17138},{data:8,id:17139},{data:"webm",id:17026},{data:2,id:17031},{data:2,id:17029}]},{id:408125543,data:[{id:357149030,data:[{data:1e6,id:2807729},{data:"whammy",id:19840},{data:"whammy",id:22337},{data:(i=r.duration,[].slice.call(new Uint8Array(new Float64Array([i]).buffer),0).map((function(e){return String.fromCharCode(e)})).reverse().join("")),id:17545}]},{id:374648427,data:[{id:174,data:[{data:1,id:215},{data:1,id:29637},{data:0,id:156},{data:"und",id:2274716},{data:"V_VP8",id:134},{data:"VP8",id:2459272},{data:1,id:131},{id:224,data:[{data:r.width,id:176},{data:r.height,id:186}]}]}]}]}],d=0,s=0;d<e.length;){var c=[],u=0;do{c.push(e[d]),u+=e[d].duration,d++}while(d<e.length&&u<3e4);var l={id:524531317,data:t(s,0,c)};o[1].data.push(l),s+=u}return function e(t){for(var r=[],i=0;i<t.length;i++){var o=t[i].data;"object"===typeof o&&(o=e(o)),"number"===typeof o&&(o=a(o.toString(2))),"string"===typeof o&&(o=new Uint8Array(o.split("").map((function(e){return e.charCodeAt(0)}))));var d=o.size||o.byteLength||o.length,s=Math.ceil(Math.ceil(Math.log(d)/Math.log(2))/8),c=d.toString(2),u=new Array(7*s+7+1-c.length).join("0")+c,l=new Array(s).join("0")+"1"+u;r.push(n(t[i].id)),r.push(a(l)),r.push(o)}return new Blob(r,{type:"video/webm"})}(o)}(e.map((function(e){var t=function(e){for(var t=e.RIFF[0].WEBP[0],n=t.indexOf("\x9d\x01*"),a=0,r=[];a<4;a++)r[a]=t.charCodeAt(n+3+a);return{width:16383&(r[1]<<8|r[0]),height:16383&(r[3]<<8|r[2]),data:t,riff:e}}(function e(t){for(var n=0,a={};n<t.length;){var i=t.substr(n,4),o=r(t,n),d=t.substr(n+4+4,o);n+=8+o,a[i]=a[i]||[],"RIFF"===i||"LIST"===i?a[i].push(e(d)):a[i].push(d)}return a}(atob(e.image.slice(23))));return t.duration=e.duration,t})));postMessage(i)}return e.prototype.add=function(e,t){if("canvas"in e&&(e=e.canvas),"toDataURL"in e&&(e=e.toDataURL("image/webp",this.quality)),!/^data:image\/webp;base64,/gi.test(e))throw"Input must be formatted properly as a base64 encoded DataURI of type image/webp";this.frames.push({image:e,duration:t||this.duration})},e.prototype.compile=function(e){var n=function(e){var t=h.createObjectURL(new Blob([e.toString(),"this.onmessage =  function (eee) {"+e.name+"(eee.data);}"],{type:"application/javascript"})),n=new Worker(t);return h.revokeObjectURL(t),n}(t);n.onmessage=function(t){t.data.error?console.error(t.data.error):e(t.data)},n.postMessage(this.frames)},{Video:e}}();i.Whammy=A;var U={init:function(){var e=this;if("undefined"!==typeof indexedDB&&"undefined"!==typeof indexedDB.open){var t,n=this.dbName||location.href.replace(/\/|:|#|%|\.|\[|\]/g,""),a=indexedDB.open(n,1);a.onerror=e.onError,a.onsuccess=function(){((t=a.result).onerror=e.onError,t.setVersion)?1!==t.version?t.setVersion(1).onsuccess=function(){r(t),i()}:i():i()},a.onupgradeneeded=function(e){r(e.target.result)}}else console.error("IndexedDB API are not available in this browser.");function r(t){t.createObjectStore(e.dataStoreName)}function i(){var n=t.transaction([e.dataStoreName],"readwrite");function a(t){n.objectStore(e.dataStoreName).get(t).onsuccess=function(n){e.callback&&e.callback(n.target.result,t)}}e.videoBlob&&n.objectStore(e.dataStoreName).put(e.videoBlob,"videoBlob"),e.gifBlob&&n.objectStore(e.dataStoreName).put(e.gifBlob,"gifBlob"),e.audioBlob&&n.objectStore(e.dataStoreName).put(e.audioBlob,"audioBlob"),a("audioBlob"),a("videoBlob"),a("gifBlob")}},Fetch:function(e){return this.callback=e,this.init(),this},Store:function(e){return this.audioBlob=e.audioBlob,this.videoBlob=e.videoBlob,this.gifBlob=e.gifBlob,this.init(),this},onError:function(e){console.error(JSON.stringify(e,null,"\t"))},dataStoreName:"recordRTC",dbName:null};function j(e,t){if("undefined"===typeof GIFEncoder){var n=document.createElement("script");n.src="https://www.webrtc-experiment.com/gif-recorder.js",(document.body||document.documentElement).appendChild(n)}t=t||{};var a=e instanceof CanvasRenderingContext2D||e instanceof HTMLCanvasElement;this.record=function(){"undefined"!==typeof GIFEncoder&&d?(a||(t.width||(t.width=s.offsetWidth||320),t.height||(t.height=s.offsetHeight||240),t.video||(t.video={width:t.width,height:t.height}),t.canvas||(t.canvas={width:t.width,height:t.height}),i.width=t.canvas.width||320,i.height=t.canvas.height||240,s.width=t.video.width||320,s.height=t.video.height||240),(l=new GIFEncoder).setRepeat(0),l.setDelay(t.frameRate||200),l.setQuality(t.quality||10),l.start(),"function"===typeof t.onGifRecordingStarted&&t.onGifRecordingStarted(),Date.now(),p=u((function e(n){if(!0!==h.clearedRecordedData){if(r)return setTimeout((function(){e(n)}),100);p=u(e),void 0===typeof c&&(c=n),n-c<90||(!a&&s.paused&&s.play(),a||o.drawImage(s,0,0,i.width,i.height),t.onGifPreview&&t.onGifPreview(i.toDataURL("image/png")),l.addFrame(o),c=n)}})),t.initCallback&&t.initCallback()):setTimeout(h.record,1e3)},this.stop=function(e){e=e||function(){},p&&f(p),Date.now(),this.blob=new Blob([new Uint8Array(l.stream().bin)],{type:"image/gif"}),e(this.blob),l.stream().bin=[]};var r=!1;this.pause=function(){r=!0},this.resume=function(){r=!1},this.clearRecordedData=function(){h.clearedRecordedData=!0,l&&(l.stream().bin=[])},this.name="GifRecorder",this.toString=function(){return this.name};var i=document.createElement("canvas"),o=i.getContext("2d");a&&(e instanceof CanvasRenderingContext2D?i=(o=e).canvas:e instanceof HTMLCanvasElement&&(o=e.getContext("2d"),i=e));var d=!0;if(!a){var s=document.createElement("video");s.muted=!0,s.autoplay=!0,s.playsInline=!0,d=!1,s.onloadedmetadata=function(){d=!0},k(e,s),s.play()}var c,l,p=null,h=this}function _(e,t){t=t||"multi-streams-mixer";var n=[],a=!1,r=document.createElement("canvas"),i=r.getContext("2d");r.style.opacity=0,r.style.position="absolute",r.style.zIndex=-1,r.style.top="-1000em",r.style.left="-1000em",r.className=t,(document.body||document.documentElement).appendChild(r),this.disableLogs=!1,this.frameInterval=10,this.width=360,this.height=240,this.useGainNode=!0;var o=this,d=window.AudioContext;"undefined"===typeof d&&("undefined"!==typeof webkitAudioContext&&(d=webkitAudioContext),"undefined"!==typeof mozAudioContext&&(d=mozAudioContext));var s=window.URL;"undefined"===typeof s&&"undefined"!==typeof webkitURL&&(s=webkitURL),"undefined"!==typeof navigator&&"undefined"===typeof navigator.getUserMedia&&("undefined"!==typeof navigator.webkitGetUserMedia&&(navigator.getUserMedia=navigator.webkitGetUserMedia),"undefined"!==typeof navigator.mozGetUserMedia&&(navigator.getUserMedia=navigator.mozGetUserMedia));var c=window.MediaStream;"undefined"===typeof c&&"undefined"!==typeof webkitMediaStream&&(c=webkitMediaStream),"undefined"!==typeof c&&"undefined"===typeof c.prototype.stop&&(c.prototype.stop=function(){this.getTracks().forEach((function(e){e.stop()}))});var u={};function l(){if(!a){var e=n.length,t=!1,i=[];if(n.forEach((function(e){e.stream||(e.stream={}),e.stream.fullcanvas?t=e:i.push(e)})),t)r.width=t.stream.width,r.height=t.stream.height;else if(i.length){r.width=e>1?2*i[0].width:i[0].width;var d=1;3!==e&&4!==e||(d=2),5!==e&&6!==e||(d=3),7!==e&&8!==e||(d=4),9!==e&&10!==e||(d=5),r.height=i[0].height*d}else r.width=o.width||360,r.height=o.height||240;t&&t instanceof HTMLVideoElement&&f(t),i.forEach((function(e,t){f(e,t)})),setTimeout(l,o.frameInterval)}}function f(e,t){if(!a){var n=0,r=0,o=e.width,d=e.height;1===t&&(n=e.width),2===t&&(r=e.height),3===t&&(n=e.width,r=e.height),4===t&&(r=2*e.height),5===t&&(n=e.width,r=2*e.height),6===t&&(r=3*e.height),7===t&&(n=e.width,r=3*e.height),"undefined"!==typeof e.stream.left&&(n=e.stream.left),"undefined"!==typeof e.stream.top&&(r=e.stream.top),"undefined"!==typeof e.stream.width&&(o=e.stream.width),"undefined"!==typeof e.stream.height&&(d=e.stream.height),i.drawImage(e,n,r,o,d),"function"===typeof e.stream.onRender&&e.stream.onRender(i,n,r,o,d,t)}}function p(e){var n=document.createElement("video");return function(e,t){"srcObject"in t?t.srcObject=e:"mozSrcObject"in t?t.mozSrcObject=e:t.srcObject=e}(e,n),n.className=t,n.muted=!0,n.volume=0,n.width=e.width||o.width||360,n.height=e.height||o.height||240,n.play(),n}function h(t){n=[],(t=t||e).forEach((function(e){if(e.getTracks().filter((function(e){return"video"===e.kind})).length){var t=p(e);t.stream=e,n.push(t)}}))}"undefined"!==typeof d?u.AudioContext=d:"undefined"!==typeof webkitAudioContext&&(u.AudioContext=webkitAudioContext),this.startDrawingFrames=function(){l()},this.appendStreams=function(t){if(!t)throw"First parameter is required.";t instanceof Array||(t=[t]),t.forEach((function(t){var a=new c;if(t.getTracks().filter((function(e){return"video"===e.kind})).length){var r=p(t);r.stream=t,n.push(r),a.addTrack(t.getTracks().filter((function(e){return"video"===e.kind}))[0])}if(t.getTracks().filter((function(e){return"audio"===e.kind})).length){var i=o.audioContext.createMediaStreamSource(t);o.audioDestination=o.audioContext.createMediaStreamDestination(),i.connect(o.audioDestination),a.addTrack(o.audioDestination.stream.getTracks().filter((function(e){return"audio"===e.kind}))[0])}e.push(a)}))},this.releaseStreams=function(){n=[],a=!0,o.gainNode&&(o.gainNode.disconnect(),o.gainNode=null),o.audioSources.length&&(o.audioSources.forEach((function(e){e.disconnect()})),o.audioSources=[]),o.audioDestination&&(o.audioDestination.disconnect(),o.audioDestination=null),o.audioContext&&o.audioContext.close(),o.audioContext=null,i.clearRect(0,0,r.width,r.height),r.stream&&(r.stream.stop(),r.stream=null)},this.resetVideoStreams=function(e){!e||e instanceof Array||(e=[e]),h(e)},this.name="MultiStreamsMixer",this.toString=function(){return this.name},this.getMixedStream=function(){a=!1;var t=function(){var e;h(),"captureStream"in r?e=r.captureStream():"mozCaptureStream"in r?e=r.mozCaptureStream():o.disableLogs||console.error("Upgrade to latest Chrome or otherwise enable this flag: chrome://flags/#enable-experimental-web-platform-features");var t=new c;return e.getTracks().filter((function(e){return"video"===e.kind})).forEach((function(e){t.addTrack(e)})),r.stream=t,t}(),n=function(){u.AudioContextConstructor||(u.AudioContextConstructor=new u.AudioContext);o.audioContext=u.AudioContextConstructor,o.audioSources=[],!0===o.useGainNode&&(o.gainNode=o.audioContext.createGain(),o.gainNode.connect(o.audioContext.destination),o.gainNode.gain.value=0);var t=0;if(e.forEach((function(e){if(e.getTracks().filter((function(e){return"audio"===e.kind})).length){t++;var n=o.audioContext.createMediaStreamSource(e);!0===o.useGainNode&&n.connect(o.gainNode),o.audioSources.push(n)}})),!t)return;return o.audioDestination=o.audioContext.createMediaStreamDestination(),o.audioSources.forEach((function(e){e.connect(o.audioDestination)})),o.audioDestination.stream}();return n&&n.getTracks().filter((function(e){return"audio"===e.kind})).forEach((function(e){t.addTrack(e)})),e.forEach((function(e){e.fullcanvas&&!0})),t}}function B(e,t){e=e||[];var n,a,r=this;(t=t||{elementClass:"multi-streams-mixer",mimeType:"video/webm",video:{width:360,height:240}}).frameInterval||(t.frameInterval=10),t.video||(t.video={}),t.video.width||(t.video.width=360),t.video.height||(t.video.height=240),this.record=function(){n=new _(e,t.elementClass||"multi-streams-mixer"),function(){var t=[];return e.forEach((function(e){C(e,"video").forEach((function(e){t.push(e)}))})),t}().length&&(n.frameInterval=t.frameInterval||10,n.width=t.video.width||360,n.height=t.video.height||240,n.startDrawingFrames()),t.previewStream&&"function"===typeof t.previewStream&&t.previewStream(n.getMixedStream()),(a=new E(n.getMixedStream(),t)).record()},this.stop=function(e){a&&a.stop((function(t){r.blob=t,e(t),r.clearRecordedData()}))},this.pause=function(){a&&a.pause()},this.resume=function(){a&&a.resume()},this.clearRecordedData=function(){a&&(a.clearRecordedData(),a=null),n&&(n.releaseStreams(),n=null)},this.addStreams=function(r){if(!r)throw"First parameter is required.";r instanceof Array||(r=[r]),e.concat(r),a&&n&&(n.appendStreams(r),t.previewStream&&"function"===typeof t.previewStream&&t.previewStream(n.getMixedStream()))},this.resetVideoStreams=function(e){n&&(!e||e instanceof Array||(e=[e]),n.resetVideoStreams(e))},this.getMixer=function(){return n},this.name="MultiStreamRecorder",this.toString=function(){return this.name}}function I(e,t){function n(){return new ReadableStream({start:function(n){var a=document.createElement("canvas"),r=document.createElement("video");r.srcObject=e,r.onplaying=function(){a.width=t.width,a.height=t.height;var e=a.getContext("2d"),i=1e3/t.frameRate;setTimeout((function a(){e.drawImage(r,0,0),n.enqueue(e.getImageData(0,0,t.width,t.height)),setTimeout(a,i)}),i)},r.play()}})}var a,r;"undefined"!==typeof ReadableStream&&"undefined"!==typeof WritableStream||console.error("Following polyfill is strongly recommended: https://unpkg.com/@mattiasbuelens/web-streams-polyfill/dist/polyfill.min.js"),(t=t||{}).width=t.width||640,t.height=t.height||480,t.frameRate=t.frameRate||30,t.bitrate=t.bitrate||1200,this.record=function(){i=[],r=!1,this.blob=null,function e(o,d){if(t.workerPath||d){if(!t.workerPath&&d instanceof ArrayBuffer){var s=new Blob([d],{type:"text/javascript"});t.workerPath=h.createObjectURL(s)}t.workerPath||console.error("workerPath parameter is missing."),(a=new Worker(t.workerPath)).postMessage(t.webAssemblyPath||"https://unpkg.com/webm-wasm@latest/dist/webm-wasm.wasm"),a.addEventListener("message",(function(e){"READY"===e.data?(a.postMessage({width:t.width,height:t.height,bitrate:t.bitrate||1200,timebaseDen:t.frameRate||30,realtime:!0}),n().pipeTo(new WritableStream({write:function(e){a&&a.postMessage(e.data.buffer,[e.data.buffer])}}))):e.data&&(r||i.push(e.data))}))}else fetch("https://unpkg.com/webm-wasm@latest/dist/webm-worker.js").then((function(t){t.arrayBuffer().then((function(t){e(o,t)}))}))}(e),"function"===typeof t.initCallback&&t.initCallback()},this.pause=function(){r=!0},this.resume=function(){r=!1};var i=[];this.stop=function(e){a&&(a.postMessage(null),a.terminate(),a=null),this.blob=new Blob(i,{type:"video/webm"}),e(this.blob)},this.name="WebAssemblyRecorder",this.toString=function(){return this.name},this.clearRecordedData=function(){i=[],r=!1,this.blob=null},this.blob=null}i.DiskStorage=U,i.GifRecorder=j,i.MultiStreamRecorder=B,i.RecordRTCPromisesHandler=function(e,t){if(!this)throw'Use "new RecordRTCPromisesHandler()"';if("undefined"===typeof e)throw'First argument "MediaStream" is required.';var n=this;n.recordRTC=new i(e,t),this.startRecording=function(){return new Promise((function(e,t){try{n.recordRTC.startRecording(),e()}catch(a){t(a)}}))},this.stopRecording=function(){return new Promise((function(e,t){try{n.recordRTC.stopRecording((function(a){n.blob=n.recordRTC.getBlob(),n.blob&&n.blob.size?e(a):t("Empty blob.",n.blob)}))}catch(a){t(a)}}))},this.pauseRecording=function(){return new Promise((function(e,t){try{n.recordRTC.pauseRecording(),e()}catch(a){t(a)}}))},this.resumeRecording=function(){return new Promise((function(e,t){try{n.recordRTC.resumeRecording(),e()}catch(a){t(a)}}))},this.getDataURL=function(e){return new Promise((function(e,t){try{n.recordRTC.getDataURL((function(t){e(t)}))}catch(a){t(a)}}))},this.getBlob=function(){return new Promise((function(e,t){try{e(n.recordRTC.getBlob())}catch(a){t(a)}}))},this.getInternalRecorder=function(){return new Promise((function(e,t){try{e(n.recordRTC.getInternalRecorder())}catch(a){t(a)}}))},this.reset=function(){return new Promise((function(e,t){try{e(n.recordRTC.reset())}catch(a){t(a)}}))},this.destroy=function(){return new Promise((function(e,t){try{e(n.recordRTC.destroy())}catch(a){t(a)}}))},this.getState=function(){return new Promise((function(e,t){try{e(n.recordRTC.getState())}catch(a){t(a)}}))},this.blob=null,this.version="5.5.9"},i.WebAssemblyRecorder=I}).call(this,n(46),n(62))}}]);
//# sourceMappingURL=vocabulary.ec768e62.chunk.js.map