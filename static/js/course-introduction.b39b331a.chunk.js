(this.webpackJsonpuz=this.webpackJsonpuz||[]).push([[22],{1141:function(e,t,r){"use strict";r.r(t);var a=r(34),n=r.n(a),i=r(49),s=r(10),o=r(11),c=r(12),l=r(13),u=r(273),m=r(18),d=r(215),p=r(44),g=r(0),f=r.n(g),h=r(105),b=r.n(h),E=r(59),v=r.n(E),y=r(203),x=r(103),w=r.n(x),C=r(141),S=r.n(C),k=r(33),D=r.n(k),I=r(14),B=r.n(I),_=r(151),j=r.n(_),O=r(15),L=r(742),N=r(73),T=r(30),W=function(e){Object(l.a)(r,e);var t=Object(c.a)(r);function r(){var e;Object(s.a)(this,r);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={formErrors:{errors:[]},courseId:O.session.course._id,courseDescription:O.session.course.courseDescription,name:"",email:"",loading:!1,subscribed:!1,submittedName:"",submittedEmail:"",title:O.session.course.title},e.courseDescriptionError=B()({errorClass:"courseDescription"===e.state.formErrors.path&&!j()(e.state.formErrors.errors)}),e.titleError=B()({errorClass:"title"===e.state.formErrors.path&&!j()(e.state.formErrors.errors)}),e.sessionUnsubscribe=function(){var e=O.session.user,t=e.subscriptions.filter((function(e){return e._id!==O.session.course._id}));e.subscriptions=t,O.session.user=e},e.handleSubmit=function(){var t=Object(i.a)(n.a.mark((function t(r){var a,i;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.preventDefault(),t.next=3,courseSchema.validate(e.state).catch((function(t){if(t)return console.log("err: ",t),e.setState({formErrors:{errors:t}}),t}));case 3:if(a=t.sent,!j()(a.errors)){t.next=11;break}return e.setState({loading:!0}),t.next=8,e.props.client.mutate({mutation:u.b,variables:{_id:e.state.courseId,title:e.state.title,courseDescription:e.state.courseDescription},refetchQueries:[{query:d.b,variables:{usingLang:"",teachingLang:""}}]});case 8:(i=t.sent)&&(O.session.course=i.data.courseUpdate,N.toast.success("Your changes were saved.",{className:"toasty",bodyClassName:"toasty-body",hideProgressBar:!0})),e.setState({formErrors:{errors:["hi"]},loading:!1});case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.sessionSubscribe=function(){var e=O.session.course,t=O.session.user;t.subscriptions.push({_id:e._id,title:e.title}),O.session.user=t},e.componentDidMount=function(){var t=(e.props.location.state||"").courseId;new Promise((function(e){if(O.session.user.subscriptions)var r=O.session.user.subscriptions.find((function(e){return e._id===t}));e(r)})).then((function(t){var r=!1;t&&(r=!0),e.setState({subscribed:r})}))},e}return Object(o.a)(r,[{key:"render",value:function(){var e=this,t=this.props,r=t.classes,a=t.client,n=O.session.user,i=O.session.course;return f.a.createElement(p.Query,{query:d.a,variables:{_id:i._id}},(function(t){var s=t.loading,o=t.error;return s?f.a.createElement(v.a,{container:!0,alignContent:"center",justify:"center",style:{height:"300px"}},f.a.createElement(b.a,{style:{color:"grey"}})):o?(console.log("err: ",o),f.a.createElement(v.a,null,f.a.createElement("p",null,o.graphQLErrors.map((function(e,t){var r=e.message;return f.a.createElement("p",{style:{fontSize:"1.3em",color:"red",margin:"30px",padding:"30px",textAlign:"center"},key:t},r)}))))):f.a.createElement("form",{onSubmit:e.handleSubmit},f.a.createElement(y.a,null,f.a.createElement("meta",{charset:"utf-8"}),f.a.createElement("meta",{name:"viewport",content:"width=device-width, initial-scale=1, shrink-to-fit=no"}),f.a.createElement("meta",{name:"description",content:"Affordable language learning"}),f.a.createElement("meta",{name:"author",content:"Isaac Pak"}),f.a.createElement("title",null,"Utterzone | Course Introduction"),f.a.createElement("link",{rel:"canonical",href:"https://utter.zone/course/course-introduction"})),f.a.createElement(v.a,{className:r.hero,container:!0,justify:"center",direction:"column"},f.a.createElement(w.a,{className:r.header,elevation:1},f.a.createElement(D.a,{className:r.headerBody,variant:"h4",align:"center",gutterBottom:!0},"Course Introduction"))),f.a.createElement("main",{className:r.content},f.a.createElement(v.a,{container:!0,spacing:24},f.a.createElement(v.a,{item:!0,xs:12,style:{display:"flex",flexDirection:"column",alignItems:"center"}},f.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},f.a.createElement(m.m,{margin:"40px",src:i.courseImage}))),f.a.createElement(v.a,{item:!0,xs:12,align:"center"},f.a.createElement(p.Mutation,{mutation:u.c,onCompleted:e.sessionSubscribe},(function(t,r){var n=r.loading;return f.a.createElement(m.s,{loading:n,disabled:n,color:!0===e.state.subscribed?"secondary":"primary",variant:"contained",onClick:function(){e.state.subscribed&&(a.mutate({mutation:u.d,variables:{courseId:i._id,userId:O.session.user._id}}),e.setState({subscribed:!1}),e.sessionUnsubscribe()),e.state.subscribed||(t({variables:{courseId:i._id,userId:O.session.user._id}}),e.setState({subscribed:!0}))},size:"large"},f.a.createElement(D.a,null,e.state.subscribed?"unsubscribe":"subscribe"))}))),f.a.createElement(v.a,{item:!0,xs:12},f.a.createElement(D.a,{variant:"h6",align:"left",gutterBottom:!0},"General Information"),f.a.createElement(S.a,{className:"".concat(r[e.titleError]," ").concat(r.inputHeader),fullWidth:!0,disabled:e.state.loading,label:"Course Title",margin:"normal",name:"title",onChange:function(t){return e.setState({title:t.target.value})},placeholder:"And it's title here.",type:"text",variant:"outlined",value:e.state.title}),"title"===e.state.formErrors.path&&f.a.createElement("div",{style:{color:"#f44336"}},e.state.formErrors.errors[0]),f.a.createElement(S.a,{className:"".concat(r[e.courseDescriptionError]," ").concat(r.inputHeader),disabled:e.state.loading,fullWidth:!0,name:"courseDescription",label:"Course Description",type:"text",onChange:function(t){return e.setState({courseDescription:t.target.value})},margin:"normal",multiline:!0,variant:"outlined",rowsMax:"12",value:e.state.courseDescription}),"courseDescription"===e.state.formErrors.path&&f.a.createElement("div",{style:{color:"#f44336"}},e.state.formErrors.errors[0])),f.a.createElement(v.a,{item:!0,xs:12},f.a.createElement(D.a,{variant:"h6",align:"left",gutterBottom:!0},"Course Details"),f.a.createElement(D.a,{variant:"body1",align:"left",gutterBottom:!0},"Course Author:"," ",f.a.createElement("span",{style:{fontWeight:900}},i.owner.username)),f.a.createElement(D.a,{variant:"body1",align:"left",gutterBottom:!0},"Resource:"," ",f.a.createElement("span",{style:{fontWeight:900}},i.resource||"none")),f.a.createElement(D.a,{variant:"body1",align:"left",gutterBottom:!0},"Using Language:"," ",f.a.createElement("span",{style:{fontWeight:900}},i.usingLang)),f.a.createElement(D.a,{variant:"body1",align:"left",gutterBottom:!0},"Teaching Language:"," ",f.a.createElement("span",{style:{fontWeight:900}},i.teachingLang))),f.a.createElement(v.a,{container:!0,style:{margin:"50px auto"}},f.a.createElement(m.c,{roles:n&&n.roles,perform:"course:update-introduction",id:n&&n.username,matchingID:i.owner.username,yes:function(){return f.a.createElement(v.a,{item:!0,xs:12,align:"center"},f.a.createElement(m.s,{variant:"contained",loading:e.state.loading,disabled:e.state.loading,type:"submit",color:"secondary"},"Save Changes"))},no:function(){return null}})))))}))}}]),r}(g.PureComponent);t.default=Object(p.compose)(p.withApollo,Object(T.withStyles)(L.a))(W)},742:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var a=r(41),n=function(e){return{card:{minHeight:"240px",display:"flex",flexDirection:"column"},cardGrid:{padding:"".concat(8*e.spacing.unit,"px 0")},cardMedia:{paddingTop:"56.25%","&:hover":{cursor:"pointer"}},cardUsername:{whiteSpace:"nowrap",width:"200px",overflow:"hidden",textOverflow:"ellipsis"},content:{flexGrow:1,padding:3*e.spacing.unit,width:"100%"},drawer:{width:240,flexShrink:0},drawerPaper:{width:240},editButton:{color:"white",backgroundColor:"#ff7f7e","&:hover":{backgroundColor:"#c56564"}},errorClass:{boxShadow:"0px 0px 2px 1px ".concat(e.palette.error.main),backgroundColor:"white"},errors:{color:e.palette.error.main},formControl:{margin:e.spacing.unit,minWidth:120},gridActions:{display:"flex",justifyContent:"space-between"},gridTitle:{height:"40px",lineHeight:"1em",overflow:"hidden",textOverflow:"ellipsis",wordBreak:"break-word"},header:{fontSize:3*e.spacing.unit,fontWeight:400,height:"100%",minHeight:"40px",width:"100%"},headerBody:{padding:"40px"},hero:{padding:"0 24px "},heroUnit:{},heroContent:{margin:"0 auto",padding:"".concat(16*e.spacing.unit,"px 0 0 0")},heroButtons:{marginTop:4*e.spacing.unit},icon:{marginRight:2*e.spacing.unit},inputHeader:{background:"white",minHeight:"40px"},layout:Object(a.a)({width:"auto",marginLeft:3*e.spacing.unit,marginRight:3*e.spacing.unit},e.breakpoints.up(1240+3*e.spacing.unit*2),{width:1240,marginLeft:"auto",marginRight:"auto"}),root:{alignItems:"flex-start",flexDirection:"row",display:"flex",flexGrow:1,width:"100%"},selectEmpty:{marginTop:2*e.spacing.unit},searchField:{marginTop:"7px"},showMore:{position:"absolute",bottom:-50,left:"50%",webkitTransform:"translateX(-50%)",transform:"translateX(-50%)"}}}}}]);
//# sourceMappingURL=course-introduction.b39b331a.chunk.js.map